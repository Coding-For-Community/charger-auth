const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SnapEvidence-B91rc0vX.js","assets/index-f4jVrthd.js","assets/index-DlEsbloS.css","assets/Stack-DqPKgHu3.js","assets/fetchBackend-BhcWXkpf.js","assets/Group-DSyuhYmg.js","assets/Title-D7Y4wAH7.js","assets/Button-BUpFG6mw.js","assets/perms-JnHyfI8L.js","assets/UnstyledButton-CyppDay1.js","assets/Card-zduSuG42.js","assets/Paper-C7M-9yG3.js","assets/FocusTrap-BqIqAopu.js","assets/Text-Q1Gb4oOA.js","assets/Modal-DLfcBFWK.js","assets/CloseButton-dd7xDHOg.js","assets/use-window-event-BgNKlV09.js","assets/tslib.es6-BDktPqig.js","assets/ModeSelect-CSzNBfVN.js","assets/Select-BTV72GkC.js","assets/InputBase-CRgqi-tl.js"])))=>i.map(i=>d[i]);
import{r as a,l as j,j as e,L as h,_ as x}from"./index-f4jVrthd.js";import{u as S,a as _,c as d}from"./checkIn-DuMUVvMW.js";import{b as T,L as b}from"./perms-JnHyfI8L.js";import{b as v,c as y}from"./icons-v3eJsMsF.js";import{T as m}from"./Title-D7Y4wAH7.js";import{T as l}from"./Text-Q1Gb4oOA.js";import{S as E}from"./Stack-DqPKgHu3.js";import"./tslib.es6-BDktPqig.js";import"./fetchBackend-BhcWXkpf.js";const L=a.lazy(()=>x(()=>import("./SnapEvidence-B91rc0vX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),P=a.lazy(()=>x(()=>import("./ModeSelect-CSzNBfVN.js"),__vite__mapDeps([18,1,2,19,20,4,15,9,12,7,8,3,13])));function B(){const[n,r]=a.useState({status:"loading"}),[u,p]=a.useState(!1),[k,f]=a.useState(!1),{emailB64:i}=T(),{kioskToken:g}=j.useSearch(),t=S(g),s=_();if(a.useEffect(()=>{!u&&s.data&&t.data&&t.data!==0&&(p(!0),d(i,s.data,t.data).then(r))},[s.data,t.data,u]),t.data===0&&!k)return e.jsx(L,{onSend:c=>{f(!0),r({status:"loading"}),d(i,s.data,void 0,c).then(r)}});let o=e.jsx(e.Fragment,{});switch(n.status){case"loading":o=e.jsxs(e.Fragment,{children:[e.jsx(b,{size:"xl",mb:"md"}),e.jsx(m,{order:3,ta:"center",mb:"xs",children:"Checking you in..."}),e.jsx(l,{ta:"center",c:"dimmed",children:"Please wait while we verify your information and check you in."})]});break;case"ok":o=e.jsxs(e.Fragment,{children:[e.jsx(y,{size:48,color:"green"}),e.jsx(m,{order:3,ta:"center",mt:"md",mb:"xs",children:"Check-in Successful!"}),e.jsxs(l,{ta:"center",c:"dimmed",mb:"md",children:["Welcome",n.studentName?`, ${n.studentName}`:"","! You have just checked in for this block."]}),e.jsx(h,{to:"/HomePage",style:{textDecoration:"none"},children:"Return to home page"})]});break;case"err":o=e.jsxs(e.Fragment,{children:[e.jsx(v,{size:48,color:"#fa5252"}),e.jsx(m,{order:3,ta:"center",mt:"md",c:"#fa5252",children:"Check-in Failed"}),e.jsx(l,{ta:"center",c:"dimmed",mb:"md",style:{whiteSpace:"pre-wrap"},children:n.msg?.trim()??"An unknown error occurred. Please try again."}),e.jsx(h,{to:"/HomePage",children:"Return to home page"})]});break;case"modeNeeded":return e.jsx(P,{onSelect:c=>{r({status:"loading"}),d(i,s.data,t.data.token,void 0,c).then(r)}})}return e.jsx(E,{justify:"center",align:"center",mih:"100vh",gap:0,p:"md",children:o})}export{B as component};
