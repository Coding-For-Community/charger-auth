import{r as a,j as e}from"./index-f4jVrthd.js";import{a as d}from"./perms-JnHyfI8L.js";import{f as c}from"./fetchBackend-BhcWXkpf.js";import{S as p}from"./SignInButton-IY2wy4eS.js";import{p as f}from"./checkIn-DuMUVvMW.js";import{ModeSelectComponent as h}from"./ModeSelect-CSzNBfVN.js";import{M as x}from"./Modal-DLfcBFWK.js";import{T as o}from"./Title-D7Y4wAH7.js";import{B as g}from"./Button-BUpFG6mw.js";import{T as j}from"./TextInput-BJdK_MAG.js";import"./tslib.es6-BDktPqig.js";import"./Select-BTV72GkC.js";import"./InputBase-CRgqi-tl.js";import"./CloseButton-dd7xDHOg.js";import"./UnstyledButton-CyppDay1.js";import"./FocusTrap-BqIqAopu.js";import"./Stack-DqPKgHu3.js";import"./Text-Q1Gb4oOA.js";import"./Paper-C7M-9yG3.js";import"./use-window-event-BgNKlV09.js";function R(s){const[i,m]=a.useState(""),[l,u]=a.useState("free_period"),r=d({queryKey:["manualCheckIn"],queryFn:async()=>{if(i==="")return;const t=parseInt(i);if(Number.isNaN(t))return window.alert("Invalid student ID"),!1;const n=await f(await c("/checkin/runManual/",{method:"POST",credentials:"include",body:JSON.stringify({student_id:t})}));if(n.status==="ok")return n.studentName;if(n.status==="err")return window.alert(n.msg),null},enabled:!1});return e.jsx(e.Fragment,{children:e.jsx(x,{opened:s.open,onClose:()=>s.setOpen(!1),children:r.data?e.jsxs(e.Fragment,{children:[e.jsxs(o,{mb:30,children:["Thanks for signing in, ",r.data,"!"]}),e.jsx(g,{onClick:()=>s.setOpen(!1),children:"Ok"})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{mb:20,children:"Sign in manually"}),e.jsxs("form",{onSubmit:()=>r.refetch(),children:[e.jsx(j,{value:i,onChange:t=>m(t.target.value),placeholder:"Enter your student ID",size:"lg",radius:12,mb:20}),e.jsx(h,{value:l,onChange:t=>t&&u(t),mb:20,labelProps:{size:"sm"}}),e.jsx(p,{submitting:r.isFetching})]})]})})})}export{R as default};
