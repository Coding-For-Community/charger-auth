import{u as f,r as m,R as g,j as t,b as r}from"./index-DH33yCP3.js";import{u as p}from"./useMutation-DRljiZTq.js";import{f as h,E as u}from"./fetchBackend-BvYIy6Ce.js";import{S as x}from"./SignInButton-iY4-K80f.js";import{S}from"./Stack-gHWCX3XE.js";import{T as l}from"./Text-DdwNvlmI.js";import{T as w}from"./TextInput-DHPDchWZ.js";import"./InputBase-1hmZZ60y.js";import"./CloseButton-Ct5Xt147.js";import"./UnstyledButton-BYBMPo6c.js";function z(){const i=f(),[e,c]=m.useState(""),{redirectUrl:n}=g.useSearch(),d=p({mutationFn:async o=>{if(o.preventDefault(),e.trim()===""){alert("Please enter your email or student ID.");return}const s=await h(`/checkin/studentExists/${e}`);if(s.status===418){window.alert("Sorry, we've hit a blackbaud API quota. Use your email instead.");return}const a=await s.json();if(!a.exists){window.alert("There is no user with email or student id "+e+".");return}window.localStorage.setItem(u,a.email),i({to:n})}});return m.useEffect(()=>{window.localStorage.getItem(u)&&i({to:n})},[]),t.jsxs(S,{p:r(10),gap:0,style:{justifyContent:"center",minHeight:"100vh"},children:[t.jsx(l,{style:{fontSize:24,fontWeight:"bold",color:"#111827",textAlign:"center",margin:0},children:"Welcome to ChargerAuth!"}),t.jsx(l,{style:{fontSize:14,color:"#4b5563",textAlign:"center",marginBottom:r(20)},children:"Enter your email or student id to sign in"}),t.jsxs("form",{onSubmit:d.mutate,children:[t.jsx(w,{value:e,onChange:o=>c(o.target.value),placeholder:"Email or Student ID",size:"lg",radius:12,mb:r(20)}),t.jsx(x,{})]})]})}export{z as component};
