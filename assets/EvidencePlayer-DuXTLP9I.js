import{r as s,j as e}from"./index-K0FgdV6K.js";import{f as j}from"./fetchBackend-CeaBtRa2.js";import{M as m}from"./Modal-Dv_JTD4A.js";import{T as f}from"./Title-BHNSXjzb.js";import{G as v}from"./Group-FKHHgEPf.js";import{B as h}from"./Button-DqdIQSGz.js";import{C}from"./Center-CSlo4YNp.js";import{L as k}from"./perms-6XmeeNuH.js";import"./CloseButton-CU3kp7SK.js";import"./Paper-CYedouDT.js";import"./tslib.es6-BDktPqig.js";function T(t){const[n,d]=s.useState(0),[l,x]=s.useState(null),[b,a]=s.useState(!0),c=t.students[n],o=t.students.length;return s.useEffect(()=>{if(o==0)return;let r=null;a(!0);let u=`/checkin/studentVid?free_block=${t.freeBlock}`;return u+=`&email_b64=${btoa(c.email)}`,j(u).then(i=>i.blob()).then(i=>{r=URL.createObjectURL(i),x(r),a(!1)}).catch(()=>{window.alert("Developer error: This student does not seem to have a video.")}),()=>{r&&URL.revokeObjectURL(r)}},[t]),!t.students||o===0?e.jsx(m,{opened:t.opened,onClose:t.onClose,centered:!0,children:e.jsx(f,{order:4,mb:"md",children:"No tentative student videos available."})}):e.jsxs(m,{opened:t.opened,onClose:t.onClose,centered:!0,size:"lg",children:[e.jsxs(v,{justify:"space-between",mb:"md",children:[e.jsx(h,{disabled:n===0,onClick:()=>d(r=>Math.max(0,r-1)),variant:"subtle",children:"Previous"}),e.jsxs(f,{order:4,children:["Video ",n+1," of ",o," (",c.name,")"]}),e.jsx(h,{disabled:n===o-1,onClick:()=>d(r=>Math.min(o-1,r+1)),variant:"subtle",children:"Next"})]}),e.jsx(C,{children:b?e.jsx(k,{size:"lg"}):l&&e.jsx("video",{src:l,controls:!0,style:{width:"100%",borderRadius:8}})})]})}export{T as default};
