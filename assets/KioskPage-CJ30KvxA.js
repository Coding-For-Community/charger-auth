const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ManualCheckInModal-D4yOvQiu.js","assets/index-BqTru8hP.js","assets/index-DlEsbloS.css","assets/perms-Ci-WEFVW.js","assets/fetchBackend-C9uYacD6.js","assets/SignInButton-wuizvn64.js","assets/SignInButton-B31XC_Wg.css","assets/Modal-Bib_5y26.js","assets/Button-Ce4tf8zp.js","assets/UnstyledButton-rzi-lcRA.js","assets/CloseButton-CZ-4pOrX.js","assets/Paper-BqMcMbvK.js","assets/tslib.es6-BDktPqig.js","assets/Center-BkokBDOu.js","assets/Title-CKNj1X-Y.js","assets/TextInput-fgqT366L.js","assets/index-D_fs4Ywr.js"])))=>i.map(i=>d[i]);
import{j as e,r as c,_ as d}from"./index-BqTru8hP.js";import{u as l,a as i,L as u}from"./perms-Ci-WEFVW.js";import{f as s}from"./fetchBackend-C9uYacD6.js";import{C as m}from"./Center-BkokBDOu.js";import{T as a}from"./Text-CFB5sB-0.js";import{S as h}from"./Stack-ByGyzBBd.js";const f=c.lazy(()=>d(()=>import("./ManualCheckInModal-D4yOvQiu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),k=c.lazy(()=>d(()=>import("./index-D_fs4Ywr.js"),__vite__mapDeps([16,1,2])).then(t=>({default:t.QRCodeSVG})));function w(){const t=l(),o=i({queryKey:["qrCodeToken"],queryFn:async()=>await(await s("/checkin/token/",{credentials:"include"})).json(),refetchInterval:n=>n.state.data?1e3*n.state.data.time_until_refresh:1e3,refetchOnMount:"always"}),r=i({queryKey:["currFreeBlock"],queryFn:async()=>(await(await s("/checkin/freeBlockNow/")).json()).curr_free_block});return r.isFetching||o.isLoading?e.jsxs(m,{style:{minHeight:"100vh"},children:[e.jsx(u,{size:"xl"}),e.jsx(a,{ml:"md",size:"lg",children:"Loading authentication and block info..."})]}):e.jsxs(e.Fragment,{children:[t.data?.isAdmin&&e.jsx(f,{perms:t.data}),e.jsxs(h,{align:"center",justify:"center",h:"100vh",gap:0,children:[e.jsx(a,{fz:30,fw:"bold",mb:8,gradient:{from:"blue",to:"cyan",deg:90},children:r.data?"Scan the QR code to check in!":"You can't check in right now."}),e.jsx(a,{size:"lg",c:"dimmed",ta:"center",mb:20,children:r.data&&`Current Free Period: ${r.data} Block`}),e.jsx(k,{value:`https://coding-for-community.github.io/charger-auth/#/CheckInPage?last_token=${o.data.token}`,size:350})]})]})}export{w as component};
