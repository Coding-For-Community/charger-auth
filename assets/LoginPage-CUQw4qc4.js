import{f,r as m,R as g,j as t,a as r}from"./index-DIwVt1zO.js";import{u as p}from"./useMutation-BDiQ4DkO.js";import{f as h,E as u}from"./fetchBackend-CVLyjmH-.js";import{S as x}from"./SignInButton-nZlAgyOK.js";import{S}from"./Stack-CCzc3MAq.js";import{T as l}from"./Text-yZfiPh7F.js";import{T as w}from"./TextInput-CO6K5GCW.js";import"./polymorphic-factory-Bll8S2u9.js";import"./InputBase-Ca9CwxJ_.js";import"./CloseButton-Bt-ttMrh.js";import"./UnstyledButton-CrsuLFU-.js";function B(){const i=f(),[e,c]=m.useState(""),{redirectUrl:n}=g.useSearch(),d=p({mutationFn:async o=>{if(o.preventDefault(),e.trim()===""){alert("Please enter your email or student ID.");return}const a=await h(`/checkin/studentExists/${e}`);if(a.status===418){window.alert("Sorry, we've hit a blackbaud API quota. Use your email instead.");return}const s=await a.json();if(!s.exists){window.alert("There is no user with email or student id "+e+".");return}window.localStorage.setItem(u,s.email),i({to:n})}});return m.useEffect(()=>{window.localStorage.getItem(u)&&i({to:n})},[]),t.jsxs(S,{p:r(10),gap:0,style:{justifyContent:"center",minHeight:"100vh"},children:[t.jsx(l,{style:{fontSize:24,fontWeight:"bold",color:"#111827",textAlign:"center",margin:0},children:"Welcome to ChargerAuth!"}),t.jsx(l,{style:{fontSize:14,color:"#4b5563",textAlign:"center",marginBottom:r(20)},children:"Enter your email or student id to sign in"}),t.jsxs("form",{onSubmit:d.mutate,children:[t.jsx(w,{value:e,onChange:o=>c(o.target.value),placeholder:"Email or Student ID",size:"lg",radius:12,mb:r(20)}),t.jsx(x,{})]})]})}export{B as component};
