const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SnapEvidence-ugt0SDzy.js","assets/index-DrjoZD4i.js","assets/index-DlEsbloS.css","assets/Stack-8-hGuFnY.js","assets/fetchBackend-BPZHlD5E.js","assets/Group-DDrbpdam.js","assets/Title-BuHwkS-Y.js","assets/Button-BbaIXa5l.js","assets/perms-CtE1vRLm.js","assets/UnstyledButton-BlOyOBMF.js","assets/Text-DJq31ISx.js","assets/Modal-CtnZ0Emu.js","assets/FocusTrap-CVjd_0cc.js","assets/CloseButton-Btf2JQ1c.js","assets/Paper-DMYpnoEJ.js","assets/use-window-event-iaNqUc89.js","assets/tslib.es6-BDktPqig.js","assets/ModeSelect-CZeoOS6k.js","assets/Select-COc252mG.js","assets/InputBase-DcXkoCJX.js"])))=>i.map(i=>d[i]);
import{r as o,l as g,j as e,L as u,_ as h}from"./index-DrjoZD4i.js";import{u as j,a as f,b as d}from"./checkIn-E7aEbQyp.js";import{b,L as S}from"./perms-CtE1vRLm.js";import{b as _,c as y}from"./icons-DcYFj6vn.js";import{T as m}from"./Title-BuHwkS-Y.js";import{T as l}from"./Text-DJq31ISx.js";import{S as T}from"./Stack-8-hGuFnY.js";import"./tslib.es6-BDktPqig.js";import"./fetchBackend-BPZHlD5E.js";const v=o.lazy(()=>h(()=>import("./SnapEvidence-ugt0SDzy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),C=o.lazy(()=>h(()=>import("./ModeSelect-CZeoOS6k.js"),__vite__mapDeps([17,1,2,18,19,4,13,9,12,7,8,10])));function Q(){const[t,s]=o.useState({status:"loading"}),[x,k]=o.useState(!1),{emailB64:i}=b(),{lastToken:p}=g.useSearch(),a=j(p),r=f();if(o.useEffect(()=>{a.data&&r.data&&a.data!=0&&t.status!=="ok"&&d(i,r.data,a.data.token).then(s)},[a.data,r.data]),a.data==0&&!x&&t.status!=="ok")return e.jsx(v,{title:"",subtitle:"",onSend:async c=>{console.log("Got here?"),s({status:"loading"}),k(!0),d(i,r.data,void 0,c).then(s)}});let n=e.jsx(e.Fragment,{});switch(t.status){case"loading":n=e.jsxs(e.Fragment,{children:[e.jsx(S,{size:"xl",mb:"md"}),e.jsx(m,{order:3,ta:"center",mb:"xs",children:"Checking you in..."}),e.jsx(l,{ta:"center",c:"dimmed",children:"Please wait while we verify your information and check you in."})]});break;case"ok":n=e.jsxs(e.Fragment,{children:[e.jsx(y,{size:48,color:"green"}),e.jsx(m,{order:3,ta:"center",mt:"md",mb:"xs",children:"Check-in Successful!"}),e.jsxs(l,{ta:"center",c:"dimmed",mb:"md",children:["Welcome",t.studentName?`, ${t.studentName}`:"","! You have just checked in for this block."]}),e.jsx(u,{to:"/HomePage",style:{textDecoration:"none"},children:"Return to home page"})]});break;case"err":n=e.jsxs(e.Fragment,{children:[e.jsx(_,{size:48,color:"#fa5252"}),e.jsx(m,{order:3,ta:"center",mt:"md",c:"#fa5252",children:"Check-in Failed"}),e.jsx(l,{ta:"center",c:"dimmed",mb:"md",style:{whiteSpace:"pre-wrap"},children:t.msg?.trim()??"An unknown error occurred. Please try again."}),e.jsx(u,{to:"/HomePage",children:"Return to home page"})]});break;case"modeSelectNeeded":n=e.jsx(C,{onSelect:c=>{s({status:"loading"}),d(i,r.data,a.data.token,void 0,c).then(s)}})}return e.jsx(T,{justify:"center",align:"center",mih:"100vh",gap:0,p:"md",children:n})}export{Q as component};
