import{r as S,j as g,a as W,R as N,u as Ge}from"./index-CylxnQTM.js";import{u as Ke}from"./useQuery-itG2ZWB3.js";import{B as K,a as ge}from"./constants-E_3YCgtf.js";import{c as Ee,u as Ve,a as Ye,b as We,O as Xe,R as Ze,g as V,T as Ce,F as Je,d as qe,S as et,e as tt,A as ae,B as ie,G as st,f as ot}from"./createReactComponent-Cru1cafg.js";import{u as nt,B as Z,g as rt,a as at,c as z,C as it,f as T,b as j,d as lt,e as ct,h as dt,i as ut,j as ht}from"./CloseButton-DocgS7UC.js";import{P as ft,T as le}from"./Title-BcWhnF43.js";import{S as pe}from"./Stack-CzDIMnU_.js";import{T as ye}from"./Text-BD0IweUf.js";const[mt,B]=Ee("ModalBase component was not found in tree");function gt({opened:a,transitionDuration:r}){const[o,i]=S.useState(a),d=S.useRef(-1),m=Ve()?0:r;return S.useEffect(()=>(a?(i(!0),window.clearTimeout(d.current)):m===0?i(!1):d.current=window.setTimeout(()=>i(!1),m),()=>window.clearTimeout(d.current)),[a,m]),o}function pt({id:a,transitionProps:r,opened:o,trapFocus:i,closeOnEscape:d,onClose:c,returnFocus:m}){const f=nt(a),[e,t]=S.useState(!1),[s,n]=S.useState(!1),l=typeof r?.duration=="number"?r?.duration:200,u=gt({opened:o,transitionDuration:l});return Ye("keydown",h=>{h.key==="Escape"&&d&&!h.isComposing&&o&&h.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&c()},{capture:!0}),We({opened:o,shouldReturnFocus:i&&m}),{_id:f,titleMounted:e,bodyMounted:s,shouldLockScroll:u,setTitleMounted:t,setBodyMounted:n}}const we=S.forwardRef(({keepMounted:a,opened:r,onClose:o,id:i,transitionProps:d,onExitTransitionEnd:c,onEnterTransitionEnd:m,trapFocus:f,closeOnEscape:e,returnFocus:t,closeOnClickOutside:s,withinPortal:n,portalProps:l,lockScroll:u,children:h,zIndex:y,shadow:p,padding:R,__vars:C,unstyled:M,removeScrollProps:v,...x},k)=>{const{_id:Q,titleMounted:_,bodyMounted:H,shouldLockScroll:$,setTitleMounted:b,setBodyMounted:re}=pt({id:i,transitionProps:d,opened:r,trapFocus:f,closeOnEscape:e,onClose:o,returnFocus:t}),{key:Y,...P}=v||{};return g.jsx(Xe,{...l,withinPortal:n,children:g.jsx(mt,{value:{opened:r,onClose:o,closeOnClickOutside:s,onExitTransitionEnd:c,onEnterTransitionEnd:m,transitionProps:{...d,keepMounted:a},getTitleId:()=>`${Q}-title`,getBodyId:()=>`${Q}-body`,titleMounted:_,bodyMounted:H,setTitleMounted:b,setBodyMounted:re,trapFocus:f,closeOnEscape:e,zIndex:y,unstyled:M},children:g.jsx(Ze,{enabled:$&&u,...P,children:g.jsx(Z,{ref:k,...x,__vars:{...C,"--mb-z-index":(y||V("modal")).toString(),"--mb-shadow":at(p),"--mb-padding":rt(R)},children:h})},Y)})})});we.displayName="@mantine/core/ModalBase";function yt(){const a=B();return S.useEffect(()=>(a.setBodyMounted(!0),()=>a.setBodyMounted(!1)),[]),a.getBodyId()}var D={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const ve=S.forwardRef(({className:a,...r},o)=>{const i=yt(),d=B();return g.jsx(Z,{ref:o,...r,id:i,className:z({[D.body]:!d.unstyled},a)})});ve.displayName="@mantine/core/ModalBaseBody";const Se=S.forwardRef(({className:a,onClick:r,...o},i)=>{const d=B();return g.jsx(it,{ref:i,...o,onClick:c=>{d.onClose(),r?.(c)},className:z({[D.close]:!d.unstyled},a),unstyled:d.unstyled})});Se.displayName="@mantine/core/ModalBaseCloseButton";const Ne=S.forwardRef(({transitionProps:a,className:r,innerProps:o,onKeyDown:i,style:d,...c},m)=>{const f=B();return g.jsx(Ce,{mounted:f.opened,transition:"pop",...f.transitionProps,onExited:()=>{f.onExitTransitionEnd?.(),f.transitionProps?.onExited?.()},onEntered:()=>{f.onEnterTransitionEnd?.(),f.transitionProps?.onEntered?.()},...a,children:e=>g.jsx("div",{...o,className:z({[D.inner]:!f.unstyled},o.className),children:g.jsx(Je,{active:f.opened&&f.trapFocus,innerRef:m,children:g.jsx(ft,{...c,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":f.bodyMounted?f.getBodyId():void 0,"aria-labelledby":f.titleMounted?f.getTitleId():void 0,style:[d,e],className:z({[D.content]:!f.unstyled},r),unstyled:f.unstyled,children:c.children})})})})});Ne.displayName="@mantine/core/ModalBaseContent";const Re=S.forwardRef(({className:a,...r},o)=>{const i=B();return g.jsx(Z,{component:"header",ref:o,className:z({[D.header]:!i.unstyled},a),...r})});Re.displayName="@mantine/core/ModalBaseHeader";const Mt={duration:200,timingFunction:"ease",transition:"fade"};function Et(a){const r=B();return{...Mt,...r.transitionProps,...a}}const xe=S.forwardRef(({onClick:a,transitionProps:r,style:o,visible:i,...d},c)=>{const m=B(),f=Et(r);return g.jsx(Ce,{mounted:i!==void 0?i:m.opened,...f,transition:"fade",children:e=>g.jsx(qe,{ref:c,fixed:!0,style:[o,e],zIndex:m.zIndex,unstyled:m.unstyled,onClick:t=>{a?.(t),m.closeOnClickOutside&&m.onClose()},...d})})});xe.displayName="@mantine/core/ModalBaseOverlay";function Ct(){const a=B();return S.useEffect(()=>(a.setTitleMounted(!0),()=>a.setTitleMounted(!1)),[]),a.getTitleId()}const be=S.forwardRef(({className:a,...r},o)=>{const i=Ct(),d=B();return g.jsx(Z,{component:"h2",ref:o,className:z({[D.title]:!d.unstyled},a),...r,id:i})});be.displayName="@mantine/core/ModalBaseTitle";function wt({children:a}){return g.jsx(g.Fragment,{children:a})}const[vt,U]=Ee("Modal component was not found in tree");var O={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const J=T((a,r)=>{const o=j("ModalBody",null,a),{classNames:i,className:d,style:c,styles:m,vars:f,...e}=o,t=U();return g.jsx(ve,{ref:r,...t.getStyles("body",{classNames:i,style:c,styles:m,className:d}),...e})});J.classes=O;J.displayName="@mantine/core/ModalBody";const q=T((a,r)=>{const o=j("ModalCloseButton",null,a),{classNames:i,className:d,style:c,styles:m,vars:f,...e}=o,t=U();return g.jsx(Se,{ref:r,...t.getStyles("close",{classNames:i,style:c,styles:m,className:d}),...e})});q.classes=O;q.displayName="@mantine/core/ModalCloseButton";const ee=T((a,r)=>{const o=j("ModalContent",null,a),{classNames:i,className:d,style:c,styles:m,vars:f,children:e,__hidden:t,...s}=o,n=U(),l=n.scrollAreaComponent||wt;return g.jsx(Ne,{...n.getStyles("content",{className:d,style:c,styles:m,classNames:i}),innerProps:n.getStyles("inner",{className:d,style:c,styles:m,classNames:i}),"data-full-screen":n.fullScreen||void 0,"data-modal-content":!0,"data-hidden":t||void 0,ref:r,...s,children:g.jsx(l,{style:{maxHeight:n.fullScreen?"100dvh":`calc(100dvh - (${W(n.yOffset)} * 2))`},children:e})})});ee.classes=O;ee.displayName="@mantine/core/ModalContent";const te=T((a,r)=>{const o=j("ModalHeader",null,a),{classNames:i,className:d,style:c,styles:m,vars:f,...e}=o,t=U();return g.jsx(Re,{ref:r,...t.getStyles("header",{classNames:i,style:c,styles:m,className:d}),...e})});te.classes=O;te.displayName="@mantine/core/ModalHeader";const se=T((a,r)=>{const o=j("ModalOverlay",null,a),{classNames:i,className:d,style:c,styles:m,vars:f,...e}=o,t=U();return g.jsx(xe,{ref:r,...t.getStyles("overlay",{classNames:i,style:c,styles:m,className:d}),...e})});se.classes=O;se.displayName="@mantine/core/ModalOverlay";const St={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:V("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},Nt=ct((a,{radius:r,size:o,yOffset:i,xOffset:d})=>({root:{"--modal-radius":r===void 0?void 0:ut(r),"--modal-size":dt(o,"modal-size"),"--modal-y-offset":W(i),"--modal-x-offset":W(d)}})),oe=T((a,r)=>{const o=j("ModalRoot",St,a),{classNames:i,className:d,style:c,styles:m,unstyled:f,vars:e,yOffset:t,scrollAreaComponent:s,radius:n,fullScreen:l,centered:u,xOffset:h,__staticSelector:y,attributes:p,...R}=o,C=lt({name:y,classes:O,props:o,className:d,style:c,classNames:i,styles:m,unstyled:f,attributes:p,vars:e,varsResolver:Nt});return g.jsx(vt,{value:{yOffset:t,scrollAreaComponent:s,getStyles:C,fullScreen:l},children:g.jsx(we,{ref:r,...C("root"),"data-full-screen":l||void 0,"data-centered":u||void 0,"data-offset-scrollbars":s===et.Autosize||void 0,unstyled:f,...R})})});oe.classes=O;oe.displayName="@mantine/core/ModalRoot";const[Rt,xt]=ht();function Ie({children:a}){const[r,o]=S.useState([]),[i,d]=S.useState(V("modal"));return g.jsx(Rt,{value:{stack:r,addModal:(c,m)=>{o(f=>[...new Set([...f,c])]),d(f=>typeof m=="number"&&typeof f=="number"?Math.max(f,m):f)},removeModal:c=>o(m=>m.filter(f=>f!==c)),getZIndex:c=>`calc(${i} + ${r.indexOf(c)} + 1)`,currentId:r[r.length-1],maxZIndex:i},children:a})}Ie.displayName="@mantine/core/ModalStack";const ne=T((a,r)=>{const o=j("ModalTitle",null,a),{classNames:i,className:d,style:c,styles:m,vars:f,...e}=o,t=U();return g.jsx(be,{ref:r,...t.getStyles("title",{classNames:i,style:c,styles:m,className:d}),...e})});ne.classes=O;ne.displayName="@mantine/core/ModalTitle";const bt={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:V("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},I=T((a,r)=>{const{title:o,withOverlay:i,overlayProps:d,withCloseButton:c,closeButtonProps:m,children:f,radius:e,opened:t,stackId:s,zIndex:n,...l}=j("Modal",bt,a),u=xt(),h=!!o||c,y=u&&s?{closeOnEscape:u.currentId===s,trapFocus:u.currentId===s,zIndex:u.getZIndex(s)}:{},p=i===!1?!1:s&&u?u.currentId===s:t;return S.useEffect(()=>{u&&s&&(t?u.addModal(s,n||V("modal")):u.removeModal(s))},[t,s,n]),g.jsxs(oe,{ref:r,radius:e,opened:t,zIndex:u&&s?u.getZIndex(s):n,...l,...y,children:[i&&g.jsx(se,{visible:p,transitionProps:u&&s?{duration:0}:void 0,...d}),g.jsxs(ee,{radius:e,__hidden:u&&s&&t?s!==u.currentId:!1,children:[h&&g.jsxs(te,{children:[o&&g.jsx(ne,{children:o}),c&&g.jsx(q,{...m})]}),g.jsx(J,{children:f})]})]})});I.classes=O;I.displayName="@mantine/core/Modal";I.Root=oe;I.Overlay=se;I.Content=ee;I.Body=J;I.Header=te;I.Title=ne;I.CloseButton=q;I.Stack=Ie;var It=Object.defineProperty,X=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Me=(a,r,o)=>r in a?It(a,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[r]=o,ce=(a,r)=>{for(var o in r||(r={}))Pe.call(r,o)&&Me(a,o,r[o]);if(X)for(var o of X(r))Ae.call(r,o)&&Me(a,o,r[o]);return a},de=(a,r)=>{var o={};for(var i in a)Pe.call(a,i)&&r.indexOf(i)<0&&(o[i]=a[i]);if(a!=null&&X)for(var i of X(a))r.indexOf(i)<0&&Ae.call(a,i)&&(o[i]=a[i]);return o};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var L;(a=>{const r=class E{constructor(e,t,s,n){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<E.MIN_VERSION||e>E.MAX_VERSION)throw new RangeError("Version value out of range");if(n<-1||n>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let l=[];for(let h=0;h<this.size;h++)l.push(!1);for(let h=0;h<this.size;h++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();const u=this.addEccAndInterleave(s);if(this.drawCodewords(u),n==-1){let h=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const p=this.getPenaltyScore();p<h&&(n=y,h=p),this.applyMask(y)}}d(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}static encodeText(e,t){const s=a.QrSegment.makeSegments(e);return E.encodeSegments(s,t)}static encodeBinary(e,t){const s=a.QrSegment.makeBytes(e);return E.encodeSegments([s],t)}static encodeSegments(e,t,s=1,n=40,l=-1,u=!0){if(!(E.MIN_VERSION<=s&&s<=n&&n<=E.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let h,y;for(h=s;;h++){const M=E.getNumDataCodewords(h,t)*8,v=m.getTotalBits(e,h);if(v<=M){y=v;break}if(h>=n)throw new RangeError("Data too long")}for(const M of[E.Ecc.MEDIUM,E.Ecc.QUARTILE,E.Ecc.HIGH])u&&y<=E.getNumDataCodewords(h,M)*8&&(t=M);let p=[];for(const M of e){o(M.mode.modeBits,4,p),o(M.numChars,M.mode.numCharCountBits(h),p);for(const v of M.getData())p.push(v)}d(p.length==y);const R=E.getNumDataCodewords(h,t)*8;d(p.length<=R),o(0,Math.min(4,R-p.length),p),o(0,(8-p.length%8)%8,p),d(p.length%8==0);for(let M=236;p.length<R;M^=253)o(M,8,p);let C=[];for(;C.length*8<p.length;)C.push(0);return p.forEach((M,v)=>C[v>>>3]|=M<<7-(v&7)),new E(h,t,C,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let s=0;s<t;s++)for(let n=0;n<t;n++)s==0&&n==0||s==0&&n==t-1||s==t-1&&n==0||this.drawAlignmentPattern(e[s],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let s=t;for(let l=0;l<10;l++)s=s<<1^(s>>>9)*1335;const n=(t<<10|s)^21522;d(n>>>15==0);for(let l=0;l<=5;l++)this.setFunctionModule(8,l,i(n,l));this.setFunctionModule(8,7,i(n,6)),this.setFunctionModule(8,8,i(n,7)),this.setFunctionModule(7,8,i(n,8));for(let l=9;l<15;l++)this.setFunctionModule(14-l,8,i(n,l));for(let l=0;l<8;l++)this.setFunctionModule(this.size-1-l,8,i(n,l));for(let l=8;l<15;l++)this.setFunctionModule(8,this.size-15+l,i(n,l));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let s=0;s<12;s++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;d(t>>>18==0);for(let s=0;s<18;s++){const n=i(t,s),l=this.size-11+s%3,u=Math.floor(s/3);this.setFunctionModule(l,u,n),this.setFunctionModule(u,l,n)}}drawFinderPattern(e,t){for(let s=-4;s<=4;s++)for(let n=-4;n<=4;n++){const l=Math.max(Math.abs(n),Math.abs(s)),u=e+n,h=t+s;0<=u&&u<this.size&&0<=h&&h<this.size&&this.setFunctionModule(u,h,l!=2&&l!=4)}}drawAlignmentPattern(e,t){for(let s=-2;s<=2;s++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+s,Math.max(Math.abs(n),Math.abs(s))!=1)}setFunctionModule(e,t,s){this.modules[t][e]=s,this.isFunction[t][e]=!0}addEccAndInterleave(e){const t=this.version,s=this.errorCorrectionLevel;if(e.length!=E.getNumDataCodewords(t,s))throw new RangeError("Invalid argument");const n=E.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][t],l=E.ECC_CODEWORDS_PER_BLOCK[s.ordinal][t],u=Math.floor(E.getNumRawDataModules(t)/8),h=n-u%n,y=Math.floor(u/n);let p=[];const R=E.reedSolomonComputeDivisor(l);for(let M=0,v=0;M<n;M++){let x=e.slice(v,v+y-l+(M<h?0:1));v+=x.length;const k=E.reedSolomonComputeRemainder(x,R);M<h&&x.push(0),p.push(x.concat(k))}let C=[];for(let M=0;M<p[0].length;M++)p.forEach((v,x)=>{(M!=y-l||x>=h)&&C.push(v[M])});return d(C.length==u),C}drawCodewords(e){if(e.length!=Math.floor(E.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let s=this.size-1;s>=1;s-=2){s==6&&(s=5);for(let n=0;n<this.size;n++)for(let l=0;l<2;l++){const u=s-l,y=(s+1&2)==0?this.size-1-n:n;!this.isFunction[y][u]&&t<e.length*8&&(this.modules[y][u]=i(e[t>>>3],7-(t&7)),t++)}}d(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let s=0;s<this.size;s++){let n;switch(e){case 0:n=(s+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=s%3==0;break;case 3:n=(s+t)%3==0;break;case 4:n=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:n=s*t%2+s*t%3==0;break;case 6:n=(s*t%2+s*t%3)%2==0;break;case 7:n=((s+t)%2+s*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][s]&&n&&(this.modules[t][s]=!this.modules[t][s])}}getPenaltyScore(){let e=0;for(let l=0;l<this.size;l++){let u=!1,h=0,y=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[l][p]==u?(h++,h==5?e+=E.PENALTY_N1:h>5&&e++):(this.finderPenaltyAddHistory(h,y),u||(e+=this.finderPenaltyCountPatterns(y)*E.PENALTY_N3),u=this.modules[l][p],h=1);e+=this.finderPenaltyTerminateAndCount(u,h,y)*E.PENALTY_N3}for(let l=0;l<this.size;l++){let u=!1,h=0,y=[0,0,0,0,0,0,0];for(let p=0;p<this.size;p++)this.modules[p][l]==u?(h++,h==5?e+=E.PENALTY_N1:h>5&&e++):(this.finderPenaltyAddHistory(h,y),u||(e+=this.finderPenaltyCountPatterns(y)*E.PENALTY_N3),u=this.modules[p][l],h=1);e+=this.finderPenaltyTerminateAndCount(u,h,y)*E.PENALTY_N3}for(let l=0;l<this.size-1;l++)for(let u=0;u<this.size-1;u++){const h=this.modules[l][u];h==this.modules[l][u+1]&&h==this.modules[l+1][u]&&h==this.modules[l+1][u+1]&&(e+=E.PENALTY_N2)}let t=0;for(const l of this.modules)t=l.reduce((u,h)=>u+(h?1:0),t);const s=this.size*this.size,n=Math.ceil(Math.abs(t*20-s*10)/s)-1;return d(0<=n&&n<=9),e+=n*E.PENALTY_N4,d(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let s=[6];for(let n=this.size-7;s.length<e;n-=t)s.splice(1,0,n);return s}}static getNumRawDataModules(e){if(e<E.MIN_VERSION||e>E.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const s=Math.floor(e/7)+2;t-=(25*s-10)*s-55,e>=7&&(t-=36)}return d(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(E.getNumRawDataModules(e)/8)-E.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*E.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let n=0;n<e-1;n++)t.push(0);t.push(1);let s=1;for(let n=0;n<e;n++){for(let l=0;l<t.length;l++)t[l]=E.reedSolomonMultiply(t[l],s),l+1<t.length&&(t[l]^=t[l+1]);s=E.reedSolomonMultiply(s,2)}return t}static reedSolomonComputeRemainder(e,t){let s=t.map(n=>0);for(const n of e){const l=n^s.shift();s.push(0),t.forEach((u,h)=>s[h]^=E.reedSolomonMultiply(u,l))}return s}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let s=0;for(let n=7;n>=0;n--)s=s<<1^(s>>>7)*285,s^=(t>>>n&1)*e;return d(s>>>8==0),s}finderPenaltyCountPatterns(e){const t=e[1];d(t<=this.size*3);const s=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(s&&e[0]>=t*4&&e[6]>=t?1:0)+(s&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,s){return e&&(this.finderPenaltyAddHistory(t,s),t=0),t+=this.size,this.finderPenaltyAddHistory(t,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=r;function o(f,e,t){if(e<0||e>31||f>>>e)throw new RangeError("Value out of range");for(let s=e-1;s>=0;s--)t.push(f>>>s&1)}function i(f,e){return(f>>>e&1)!=0}function d(f){if(!f)throw new Error("Assertion error")}const c=class w{constructor(e,t,s){if(this.mode=e,this.numChars=t,this.bitData=s,t<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(e){let t=[];for(const s of e)o(s,8,t);return new w(w.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!w.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let s=0;s<e.length;){const n=Math.min(e.length-s,3);o(parseInt(e.substring(s,s+n),10),n*3+1,t),s+=n}return new w(w.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!w.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],s;for(s=0;s+2<=e.length;s+=2){let n=w.ALPHANUMERIC_CHARSET.indexOf(e.charAt(s))*45;n+=w.ALPHANUMERIC_CHARSET.indexOf(e.charAt(s+1)),o(n,11,t)}return s<e.length&&o(w.ALPHANUMERIC_CHARSET.indexOf(e.charAt(s)),6,t),new w(w.Mode.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:w.isNumeric(e)?[w.makeNumeric(e)]:w.isAlphanumeric(e)?[w.makeAlphanumeric(e)]:[w.makeBytes(w.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)o(e,8,t);else if(e<16384)o(2,2,t),o(e,14,t);else if(e<1e6)o(6,3,t),o(e,21,t);else throw new RangeError("ECI assignment value out of range");return new w(w.Mode.ECI,0,t)}static isNumeric(e){return w.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return w.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let s=0;for(const n of e){const l=n.mode.numCharCountBits(t);if(n.numChars>=1<<l)return 1/0;s+=4+l+n.bitData.length}return s}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let s=0;s<e.length;s++)e.charAt(s)!="%"?t.push(e.charCodeAt(s)):(t.push(parseInt(e.substring(s+1,s+3),16)),s+=2);return t}};c.NUMERIC_REGEX=/^[0-9]*$/,c.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,c.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let m=c;a.QrSegment=c})(L||(L={}));(a=>{(r=>{const o=class{constructor(d,c){this.ordinal=d,this.formatBits=c}};o.LOW=new o(0,1),o.MEDIUM=new o(1,0),o.QUARTILE=new o(2,3),o.HIGH=new o(3,2),r.Ecc=o})(a.QrCode||(a.QrCode={}))})(L||(L={}));(a=>{(r=>{const o=class{constructor(d,c){this.modeBits=d,this.numBitsCharCount=c}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}};o.NUMERIC=new o(1,[10,12,14]),o.ALPHANUMERIC=new o(2,[9,11,13]),o.BYTE=new o(4,[8,16,16]),o.KANJI=new o(8,[8,10,12]),o.ECI=new o(7,[0,0,0]),r.Mode=o})(a.QrSegment||(a.QrSegment={}))})(L||(L={}));var F=L;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Pt={L:F.QrCode.Ecc.LOW,M:F.QrCode.Ecc.MEDIUM,Q:F.QrCode.Ecc.QUARTILE,H:F.QrCode.Ecc.HIGH},Be=128,Oe="L",Te="#FFFFFF",je="#000000",_e=!1,Le=1,At=4,Bt=0,Ot=.1;function ke(a,r=0){const o=[];return a.forEach(function(i,d){let c=null;i.forEach(function(m,f){if(!m&&c!==null){o.push(`M${c+r} ${d+r}h${f-c}v1H${c+r}z`),c=null;return}if(f===i.length-1){if(!m)return;c===null?o.push(`M${f+r},${d+r} h1v1H${f+r}z`):o.push(`M${c+r},${d+r} h${f+1-c}v1H${c+r}z`);return}m&&c===null&&(c=f)})}),o.join("")}function Fe(a,r){return a.slice().map((o,i)=>i<r.y||i>=r.y+r.h?o:o.map((d,c)=>c<r.x||c>=r.x+r.w?d:!1))}function Tt(a,r,o,i){if(i==null)return null;const d=a.length+o*2,c=Math.floor(r*Ot),m=d/r,f=(i.width||c)*m,e=(i.height||c)*m,t=i.x==null?a.length/2-f/2:i.x*m,s=i.y==null?a.length/2-e/2:i.y*m,n=i.opacity==null?1:i.opacity;let l=null;if(i.excavate){let h=Math.floor(t),y=Math.floor(s),p=Math.ceil(f+t-h),R=Math.ceil(e+s-y);l={x:h,y,w:p,h:R}}const u=i.crossOrigin;return{x:t,y:s,h:e,w:f,excavation:l,opacity:n,crossOrigin:u}}function jt(a,r){return r!=null?Math.max(Math.floor(r),0):a?At:Bt}function ze({value:a,level:r,minVersion:o,includeMargin:i,marginSize:d,imageSettings:c,size:m,boostLevel:f}){let e=N.useMemo(()=>{const h=(Array.isArray(a)?a:[a]).reduce((y,p)=>(y.push(...F.QrSegment.makeSegments(p)),y),[]);return F.QrCode.encodeSegments(h,Pt[r],o,void 0,void 0,f)},[a,r,o,f]);const{cells:t,margin:s,numCells:n,calculatedImageSettings:l}=N.useMemo(()=>{let u=e.getModules();const h=jt(i,d),y=u.length+h*2,p=Tt(u,m,h,c);return{cells:u,margin:h,numCells:y,calculatedImageSettings:p}},[e,m,c,i,d]);return{qrcode:e,margin:s,cells:t,numCells:n,calculatedImageSettings:l}}var _t=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Lt=N.forwardRef(function(r,o){const i=r,{value:d,size:c=Be,level:m=Oe,bgColor:f=Te,fgColor:e=je,includeMargin:t=_e,minVersion:s=Le,boostLevel:n,marginSize:l,imageSettings:u}=i,y=de(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=y,R=de(y,["style"]),C=u?.src,M=N.useRef(null),v=N.useRef(null),x=N.useCallback(P=>{M.current=P,typeof o=="function"?o(P):o&&(o.current=P)},[o]),[k,Q]=N.useState(!1),{margin:_,cells:H,numCells:$,calculatedImageSettings:b}=ze({value:d,level:m,minVersion:s,boostLevel:n,includeMargin:t,marginSize:l,imageSettings:u,size:c});N.useEffect(()=>{if(M.current!=null){const P=M.current,A=P.getContext("2d");if(!A)return;let ue=H;const G=v.current,he=b!=null&&G!==null&&G.complete&&G.naturalHeight!==0&&G.naturalWidth!==0;he&&b.excavation!=null&&(ue=Fe(H,b.excavation));const fe=window.devicePixelRatio||1;P.height=P.width=c*fe;const me=c/$*fe;A.scale(me,me),A.fillStyle=f,A.fillRect(0,0,$,$),A.fillStyle=e,_t?A.fill(new Path2D(ke(ue,_))):H.forEach(function(Ue,Qe){Ue.forEach(function(He,$e){He&&A.fillRect($e+_,Qe+_,1,1)})}),b&&(A.globalAlpha=b.opacity),he&&A.drawImage(G,b.x+_,b.y+_,b.w,b.h)}}),N.useEffect(()=>{Q(!1)},[C]);const re=ce({height:c,width:c},p);let Y=null;return C!=null&&(Y=N.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{Q(!0)},ref:v,crossOrigin:b?.crossOrigin})),N.createElement(N.Fragment,null,N.createElement("canvas",ce({style:re,height:c,width:c,ref:x,role:"img"},R)),Y)});Lt.displayName="QRCodeCanvas";var De=N.forwardRef(function(r,o){const i=r,{value:d,size:c=Be,level:m=Oe,bgColor:f=Te,fgColor:e=je,includeMargin:t=_e,minVersion:s=Le,boostLevel:n,title:l,marginSize:u,imageSettings:h}=i,y=de(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:p,cells:R,numCells:C,calculatedImageSettings:M}=ze({value:d,level:m,minVersion:s,boostLevel:n,includeMargin:t,marginSize:u,imageSettings:h,size:c});let v=R,x=null;h!=null&&M!=null&&(M.excavation!=null&&(v=Fe(R,M.excavation)),x=N.createElement("image",{href:h.src,height:M.h,width:M.w,x:M.x+p,y:M.y+p,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const k=ke(v,p);return N.createElement("svg",ce({height:c,width:c,viewBox:`0 0 ${C} ${C}`,ref:o,role:"img"},y),!!l&&N.createElement("title",null,l),N.createElement("path",{fill:f,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),N.createElement("path",{fill:e,d:k,shapeRendering:"crispEdges"}),x)});De.displayName="QRCodeSVG";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M19.875 6.27a2.225 2.225 0 0 1 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z",key:"svg-0"}],["path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}]],Ft=tt("outline","settings-2","Settings2",kt);async function zt(a){if(!("serviceWorker"in navigator)||!("PushManager"in window)){console.error("Push notifications are not supported.");return}try{if(await Notification.requestPermission()!=="granted"){console.warn("Permission for notifications was denied.");return}const o=await navigator.serviceWorker.ready,c=(await(await fetch(K+"/notifs/publicKey/")).json()).publicKey,m=Dt(c),f=await o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:m});await fetch(K+"/notifs/register/",{method:"POST",body:JSON.stringify({subscription:f,user_id:a})}),console.log("Successfully subscribed to push notifications.")}catch(r){console.error("Failed to subscribe to push notifications:",r)}}function Dt(a){for(var r="=".repeat((4-a.length%4)%4),o=(a+r).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(o),d=new Uint8Array(i.length),c=0;c<i.length;++c)d[c]=i.charCodeAt(c);return d}function Zt(){const a=Ge(),[r,o]=S.useState(!1),[i,d]=S.useState(!1),c=Ke({queryKey:["qrCodeToken"],queryFn:async()=>await(await fetch(K+"/checkin/token/")).json(),refetchInterval:t=>t.state.data?t.state.data.time_until_refresh*1e3:1e3}),m=window.localStorage.getItem(ge);async function f(){const t=await fetch(K+"/notifs/enabled/"+m);d((await t.json()).registered)}async function e(){const t=await fetch(K+"/notifs/unregister/",{method:"POST",body:JSON.stringify({user_id:m})});t.status!=200&&console.error("Push notifs WERE NOT DISABLED: "+t.statusText)}return S.useEffect(()=>{!m||m===""?a({to:"/MobileAppSignIn"}):f()},[m]),c.isSuccess?g.jsxs(ae,{children:[g.jsxs(I,{opened:r,onClose:()=>o(!1),children:[g.jsx(le,{order:2,mb:W(10),children:"Settings"}),g.jsxs(pe,{children:[i?g.jsx(ie,{bg:"gray",onClick:e,children:"Disable Push Notifs"}):g.jsx(ie,{onClick:()=>zt(parseInt(m,10)),children:"Enable Push Notifs"}),g.jsx(ie,{bg:"red",onClick:()=>{window.localStorage.removeItem(ge),a({to:"/MobileAppSignIn"})},children:"Log Out"})]})]}),g.jsx(ae.Main,{children:g.jsxs(pe,{style:{justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[g.jsx(le,{order:3,style:{textAlign:"center"},children:"Rotate the phone 180 degrees so the scanner can see this QR code: "}),g.jsx(De,{value:m+";"+c.data.id,size:200})]})}),g.jsx(ae.Header,{children:g.jsxs(st,{m:10,justify:"space-between",children:[g.jsx("img",{src:"icon.svg",width:25,height:25}),g.jsx(le,{order:3,children:"ChargerAuth"}),g.jsx(ot,{variant:"transparent",onClick:()=>o(!0),children:g.jsx(Ft,{size:50})})]})})]}):c.isError?g.jsx("div",{children:g.jsxs(ye,{children:["Error with fetching token: ",c.error.toString()]})}):g.jsx("div",{children:g.jsx(ye,{children:"..."})})}export{Zt as component};
