import{r as s,j as t}from"./index-f4jVrthd.js";import{f as j}from"./fetchBackend-BhcWXkpf.js";import{M as m}from"./Modal-DLfcBFWK.js";import{T as f}from"./Title-D7Y4wAH7.js";import{G as v}from"./Group-DSyuhYmg.js";import{B as h}from"./Button-BUpFG6mw.js";import{C as p}from"./Center-C1rbj4OK.js";import{L as C}from"./perms-JnHyfI8L.js";import"./FocusTrap-BqIqAopu.js";import"./CloseButton-dd7xDHOg.js";import"./UnstyledButton-CyppDay1.js";import"./Paper-C7M-9yG3.js";import"./use-window-event-BgNKlV09.js";import"./tslib.es6-BDktPqig.js";function G(e){const[n,d]=s.useState(0),[l,x]=s.useState(null),[b,a]=s.useState(!0),c=e.students[n],r=e.students.length;return s.useEffect(()=>{if(r==0||!e.opened)return;let o=null;a(!0);let u=`/checkin/studentVid?free_block=${e.freeBlock}`;return u+=`&email_b64=${btoa(c.email)}`,j(u).then(i=>i.blob()).then(i=>{o=URL.createObjectURL(i),x(o),a(!1)}).catch(()=>{window.alert("Developer error: This student does not seem to have a video.")}),()=>{o&&URL.revokeObjectURL(o)}},[e]),!e.students||r===0?t.jsx(m,{opened:e.opened,onClose:e.onClose,centered:!0,children:t.jsx(f,{order:4,mb:"md",children:"No tentative student videos available."})}):t.jsxs(m,{opened:e.opened,onClose:e.onClose,centered:!0,size:"lg",children:[t.jsxs(v,{justify:"space-between",mb:"md",children:[t.jsx(h,{disabled:n===0,onClick:()=>d(o=>Math.max(0,o-1)),variant:"subtle",children:"Previous"}),t.jsxs(f,{order:4,children:["Video ",n+1," of ",r," (",c.name,")"]}),t.jsx(h,{disabled:n===r-1,onClick:()=>d(o=>Math.min(r-1,o+1)),variant:"subtle",children:"Next"})]}),t.jsx(p,{children:b?t.jsx(C,{size:"lg"}):l&&t.jsx("video",{src:l,controls:!0,style:{width:"100%",borderRadius:8}})})]})}export{G as default};
