import{r as o,o as h,j as e}from"./index-CDPy5nL5.js";import{a as x}from"./perms-BHIf_Rlz.js";import{f as g}from"./fetchBackend-CVLyjmH-.js";import{S}from"./SignInButton-C1Qr7hTC.js";import{p as j}from"./checkIn-na2t24ph.js";import{ModeSelectComponent as y}from"./ModeSelect-D8qUNkXJ.js";import{c as b}from"./icons-Bw9nqyag.js";import{M as k}from"./Modal-BNcynYZd.js";import{S as I}from"./Stack-CyIbI5i-.js";import{T as u}from"./Title-Af8p2ZM3.js";import{B as C}from"./Button-BeeQ1w1m.js";import{T as w}from"./TextInput-BP6kZvzp.js";import"./polymorphic-factory-DhmKr4nh.js";import"./Select-C6N6-WJ5.js";import"./InputBase-B4xIpQtX.js";import"./CloseButton-Dj957TLX.js";import"./UnstyledButton-ByFpGHWe.js";import"./FocusTrap-D0LZ5N_s.js";import"./Text-CDimGAO5.js";import"./Paper-C84eN9vs.js";function U(a){const[r,i]=o.useState(""),[m,c]=o.useState("free_period"),[d,p]=o.useState(!1),f=h(),s=x({queryKey:["manualCheckIn"],queryFn:async()=>{if(r==="")return;p(!1);const t=parseInt(r);if(Number.isNaN(t))return window.alert("Invalid student ID"),!1;const n=await j(await g("/checkin/runManual/",{method:"POST",credentials:"include",body:JSON.stringify({email_or_id:r,mode:m})}));if(n.status==="ok")return n.msg;if(n.status==="err")return window.alert(n.msg),null},enabled:!1});function l(){a.setOpen(!1),f.resetQueries({queryKey:["manualCheckIn"]}),i("")}return e.jsx(e.Fragment,{children:e.jsx(k,{opened:a.open,onClose:l,children:s.data&&!d?e.jsxs(I,{align:"center",justify:"center",gap:20,children:[e.jsx(b,{color:"green",size:100,style:M}),e.jsx(u,{ta:"center",children:s.data}),e.jsx(C,{onClick:l,w:"100%",radius:12,children:"Ok"})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{mb:20,children:"Sign in manually"}),e.jsxs("form",{onSubmit:()=>s.refetch(),children:[e.jsx(w,{value:r,onChange:t=>i(t.target.value),placeholder:"Student ID or Email",size:"lg",radius:12,mb:20}),e.jsx(y,{value:m,onChange:t=>t&&c(t),mb:20,labelProps:{size:"sm"}}),e.jsx(S,{submitting:s.isFetching})]})]})})})}const M={marginTop:20,zIndex:3,transition:"transform 0.2s",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",background:"white",borderRadius:"50%",padding:12};export{U as default};
