const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EvidencePlayer-Dsn32iRd.js","assets/index-f4jVrthd.js","assets/index-DlEsbloS.css","assets/fetchBackend-BhcWXkpf.js","assets/Modal-DLfcBFWK.js","assets/FocusTrap-BqIqAopu.js","assets/Button-BUpFG6mw.js","assets/perms-JnHyfI8L.js","assets/UnstyledButton-CyppDay1.js","assets/CloseButton-dd7xDHOg.js","assets/Paper-C7M-9yG3.js","assets/use-window-event-BgNKlV09.js","assets/tslib.es6-BDktPqig.js","assets/Title-D7Y4wAH7.js","assets/Group-DSyuhYmg.js","assets/Center-C1rbj4OK.js"])))=>i.map(i=>d[i]);
import{r as j,j as e,p as ee,g as T,a as oe,c as ye,b,_ as ge}from"./index-f4jVrthd.js";import{u as je,a as _e,L as Se}from"./perms-JnHyfI8L.js";import{u as B,B as I,g as D,a as Ie,b as F,c as V,d as E,e as Q,h as we,f as Pe}from"./fetchBackend-BhcWXkpf.js";import{I as Re,a as Ne}from"./icons-v3eJsMsF.js";import{G as R}from"./Group-DSyuhYmg.js";import{T as N}from"./Title-D7Y4wAH7.js";import{A as L,a as Z}from"./AppShell-DaI6kPJI.js";import{c as ze,u as Ae,C as Te}from"./CloseButton-dd7xDHOg.js";import{u as se,C as te,S as Be}from"./Select-BTV72GkC.js";import{T as Fe}from"./TextInput-BJdK_MAG.js";import{T as re}from"./Text-Q1Gb4oOA.js";import{B as Ve}from"./Button-BUpFG6mw.js";import{P as ae}from"./Paper-C7M-9yG3.js";import{S as $e}from"./FocusTrap-BqIqAopu.js";import{I as O,u as Ge}from"./InputBase-CRgqi-tl.js";import{U as Le}from"./UnstyledButton-CyppDay1.js";import"./use-window-event-BgNKlV09.js";import"./tslib.es6-BDktPqig.js";function ne(o,t){return typeof o=="boolean"?o:t.autoContrast}var ce={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Oe=ce,ie=j.forwardRef(({__staticSelector:o,__stylesApiProps:t,className:r,classNames:i,styles:l,unstyled:n,children:d,label:a,description:m,id:k,disabled:u,error:c,size:h,labelPosition:p="left",bodyElement:x="div",labelElement:s="label",variant:f,style:_,vars:C,mod:y,attributes:S,...v},w)=>{const g=B({name:o,props:t,className:r,style:_,classes:ce,classNames:i,styles:l,unstyled:n,attributes:S});return e.jsx(I,{...g("root"),ref:w,__vars:{"--label-fz":Ie(h),"--label-lh":D(h,"label-lh")},mod:[{"label-position":p},y],variant:f,size:h,...v,children:e.jsxs(I,{component:x,htmlFor:x==="label"?k:void 0,...g("body"),children:[d,e.jsxs("div",{...g("labelWrapper"),"data-disabled":u||void 0,children:[a&&e.jsx(I,{component:s,htmlFor:s==="label"?k:void 0,...g("label"),"data-disabled":u||void 0,children:a}),m&&e.jsx(O.Description,{size:h,__inheritStyles:!1,...g("description"),children:m}),c&&typeof c!="boolean"&&e.jsx(O.Error,{size:h,__inheritStyles:!1,...g("error"),children:c})]})]})})});ie.displayName="@mantine/core/InlineInput";const le=j.createContext(null),De=le.Provider,de=()=>j.useContext(le),[Ee,We]=ze();var ue={card:"m_26775b0a"};const Qe={withBorder:!0},Me=E((o,{radius:t})=>({card:{"--card-radius":Q(t)}})),M=F((o,t)=>{const r=V("CheckboxCard",Qe,o),{classNames:i,className:l,style:n,styles:d,unstyled:a,vars:m,checked:k,mod:u,withBorder:c,value:h,onClick:p,defaultChecked:x,onChange:s,attributes:f,..._}=r,C=B({name:"CheckboxCard",classes:ue,props:r,className:l,style:n,classNames:i,styles:d,unstyled:a,attributes:f,vars:m,varsResolver:Me,rootSelector:"card"}),y=de(),S=typeof k=="boolean"?k:y?y.value.includes(h||""):void 0,[v,w]=se({value:S,defaultValue:x,finalValue:!1,onChange:s});return e.jsx(Ee,{value:{checked:v},children:e.jsx(Le,{ref:t,mod:[{"with-border":c,checked:v},u],...C("card"),..._,role:"checkbox","aria-checked":v,onClick:g=>{p?.(g),y?.onChange(h||""),w(!v)}})})});M.displayName="@mantine/core/CheckboxCard";M.classes=ue;function Ue({children:o,role:t}){const r=Ge();return r?e.jsx("div",{role:t,"aria-labelledby":r.labelId,"aria-describedby":r.describedBy,children:o}):e.jsx(e.Fragment,{children:o})}const U=F((o,t)=>{const{value:r,defaultValue:i,onChange:l,size:n,wrapperProps:d,children:a,readOnly:m,...k}=V("CheckboxGroup",null,o),[u,c]=se({value:r,defaultValue:i,finalValue:[],onChange:l}),h=p=>{const x=typeof p=="string"?p:p.currentTarget.value;!m&&c(u.includes(x)?u.filter(s=>s!==x):[...u,x])};return e.jsx(De,{value:{value:u,onChange:h,size:n},children:e.jsx(O.Wrapper,{size:n,ref:t,...d,...k,labelElement:"div",__staticSelector:"CheckboxGroup",children:e.jsx(Ue,{role:"group",children:a})})})});U.classes=O.Wrapper.classes;U.displayName="@mantine/core/CheckboxGroup";var he={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const qe={icon:te},He=E((o,{radius:t,color:r,size:i,iconColor:l,variant:n,autoContrast:d})=>{const a=ee({color:r||o.primaryColor,theme:o}),m=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":D(i,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Q(t),"--checkbox-color":n==="outline"?m:T(r,o),"--checkbox-icon-color":l?T(l,o):ne(d,o)?oe({color:r,theme:o,autoContrast:d}):void 0}}}),q=F((o,t)=>{const r=V("CheckboxIndicator",qe,o),{classNames:i,className:l,style:n,styles:d,unstyled:a,vars:m,icon:k,indeterminate:u,radius:c,color:h,iconColor:p,autoContrast:x,checked:s,mod:f,variant:_,disabled:C,attributes:y,...S}=r,v=B({name:"CheckboxIndicator",classes:he,props:r,className:l,style:n,classNames:i,styles:d,unstyled:a,attributes:y,vars:m,varsResolver:He,rootSelector:"indicator"}),w=We(),g=typeof s=="boolean"||typeof u=="boolean"?s||u:w?.checked||!1;return e.jsx(I,{ref:t,...v("indicator",{variant:_}),variant:_,mod:[{checked:g,disabled:C},f],...S,children:e.jsx(k,{indeterminate:u,...v("icon")})})});q.displayName="@mantine/core/CheckboxIndicator";q.classes=he;var me={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Je={labelPosition:"right",icon:te},Ke=E((o,{radius:t,color:r,size:i,iconColor:l,variant:n,autoContrast:d})=>{const a=ee({color:r||o.primaryColor,theme:o}),m=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":D(i,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Q(t),"--checkbox-color":n==="outline"?m:T(r,o),"--checkbox-icon-color":l?T(l,o):ne(d,o)?oe({color:r,theme:o,autoContrast:d}):void 0}}}),A=F((o,t)=>{const r=V("Checkbox",Je,o),{classNames:i,className:l,style:n,styles:d,unstyled:a,vars:m,color:k,label:u,id:c,size:h,radius:p,wrapperProps:x,checked:s,labelPosition:f,description:_,error:C,disabled:y,variant:S,indeterminate:v,icon:w,rootRef:g,iconColor:so,onChange:H,autoContrast:to,mod:be,attributes:pe,...fe}=r,$=de(),Ce=h||$?.size,G=B({name:"Checkbox",props:r,classes:me,className:l,style:n,classNames:i,styles:d,unstyled:a,attributes:pe,vars:m,varsResolver:Ke}),{styleProps:ve,rest:J}=we(fe),K=Ae(c),X=$?{checked:$.value.includes(J.value),onChange:Y=>{$.onChange(Y),H?.(Y)}}:{},ke=j.useRef(null),P=t||ke;return j.useEffect(()=>{P&&"current"in P&&P.current&&(P.current.indeterminate=v||!1)},[v,P]),e.jsx(ie,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:r,id:K,size:Ce,labelPosition:f,label:u,description:_,error:C,disabled:y,classNames:i,styles:d,unstyled:a,"data-checked":X.checked||s||void 0,variant:S,ref:g,mod:be,...ve,...x,children:e.jsxs(I,{...G("inner"),mod:{"data-label-position":f},children:[e.jsx(I,{component:"input",id:K,ref:P,checked:s,disabled:y,mod:{error:!!C,indeterminate:v},...G("input",{focusable:!0,variant:S}),onChange:H,...J,...X,type:"checkbox"}),e.jsx(w,{indeterminate:v,...G("icon")})]})})});A.classes={...me,...Oe};A.displayName="@mantine/core/Checkbox";A.Group=U;A.Indicator=q;A.Card=M;var xe={root:"m_3eebeb36",label:"m_9e365f20"};const Xe={orientation:"horizontal"},Ye=E((o,{color:t,variant:r,size:i})=>({root:{"--divider-color":t?T(t,o):void 0,"--divider-border-style":r,"--divider-size":D(i,"divider-size")}})),z=F((o,t)=>{const r=V("Divider",Xe,o),{classNames:i,className:l,style:n,styles:d,unstyled:a,vars:m,color:k,orientation:u,label:c,labelPosition:h,mod:p,attributes:x,...s}=r,f=B({name:"Divider",classes:xe,props:r,className:l,style:n,classNames:i,styles:d,unstyled:a,attributes:x,vars:m,varsResolver:Ye});return e.jsx(I,{ref:t,mod:[{orientation:u,"with-label":!!c},p],...f("root"),...s,role:"separator",children:c&&e.jsx(I,{component:"span",mod:{position:h},...f("label"),children:c})})});z.classes=xe;z.displayName="@mantine/core/Divider";const jo=ye("/Admin")({component:eo}),Ze=j.lazy(()=>ge(()=>import("./EvidencePlayer-Dsn32iRd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])));function eo(){const o=je(),[t,r]=j.useState(!1),[i,l]=j.useState(!0),[n,d]=j.useState("A"),[a,m]=j.useState(""),[k,u]=j.useState(()=>{const s=window.localStorage.getItem("checkedItems");return s==null?[]:JSON.parse(s)}),c=_e({queryKey:["students",n],queryFn:async()=>await(await Pe(`/checkin/students/${n}`)).json()});function h(s){return k.includes(s)}function p(s,f){u(_=>{let C=_;return s?C.includes(f)||(C=C.concat(f)):C=C.filter(y=>y!==f),window.localStorage.setItem("checkedItems",JSON.stringify(C)),C})}function x(s){return a===""||s.name.toLowerCase().includes(a.toLowerCase())||s.id&&s.id.toLowerCase().includes(a.toLowerCase())}return o.isFetching?e.jsxs(R,{justify:"center",align:"center",style:{minHeight:"100vh"},children:[e.jsx(Se,{size:"xl"}),e.jsx(N,{order:3,ml:"md",children:"Loading admin dashboard..."})]}):e.jsxs(L,{padding:"md",header:{height:60},navbar:{width:240,breakpoint:"sm",collapsed:{mobile:i}},style:{background:"#f6f8fa"},children:[e.jsx(L.Header,{p:b(15),style:{background:"#fff",borderBottom:"1px solid #e9ecef"},children:e.jsxs(R,{gap:b(10),children:[e.jsx("img",{src:"icon.svg",width:32,height:32,style:{borderRadius:8}}),e.jsx(N,{order:3,fw:700,c:"blue",children:"CA Check-in Admin"}),e.jsx(Z,{variant:"transparent",ml:"auto",hiddenFrom:"sm",onClick:()=>l(!i),children:e.jsx(Re,{})})]})}),e.jsxs(L.Navbar,{p:"md",style:{background:"#f8fafc",borderRight:"1px solid #e9ecef"},children:[e.jsxs(R,{justify:"space-between",mb:b(8),children:[e.jsx(N,{order:4,c:"gray.7",children:"Options"}),e.jsx(Te,{hiddenFrom:"sm",onClick:()=>l(!0)})]}),e.jsx(z,{mb:b(12)}),e.jsx(Be,{data:["A","B","C","D","E","F","G"],value:n,onChange:s=>{s!=null&&d(s)},maw:b(200),label:"Free Period"}),e.jsx(Fe,{value:a,onChange:s=>m(s.target.value),placeholder:"Search by name",maw:b(200),label:"Student Search",mt:b(16)}),e.jsx(z,{mt:b(16)}),e.jsxs(R,{gap:b(8),children:[e.jsx(Z,{variant:"outline",color:"blue",radius:"lg",onClick:()=>c.refetch(),loading:c.isFetching,children:e.jsx(Ne,{size:"20"})}),e.jsx(re,{size:"sm",c:"gray.6",children:"Reload students"})]}),e.jsx(z,{mb:b(16)}),e.jsx(Ve,{bg:"yellow",onClick:()=>r(!0),children:"Open Tentative Videos"})]}),e.jsxs(L.Main,{maw:b(1200),mih:"calc(100vh - 20px)",children:[e.jsxs(N,{order:4,c:"gray.7",mb:b(8),children:["Students with ",n," block free"]}),e.jsx(z,{mb:b(16)}),e.jsxs(R,{align:"flex-start",grow:!0,style:{height:"calc(100vh - 150px)"},children:[e.jsx(W,{title:"Checked In",color:"green",students:c.data?.filter(s=>s.checked_in==="yes"&&x(s))??[],checked:h,setChecked:p}),e.jsx(W,{title:"Tentative",color:"yellow",students:c.data?.filter(s=>s.checked_in==="tentative"&&x(s))??[],checked:h,setChecked:p}),e.jsx(W,{title:"Absent",color:"red",students:c.data?.filter(s=>s.checked_in==="no"&&x(s))??[],checked:h,setChecked:p})]})]}),e.jsx(Ze,{opened:t,onClose:()=>{c.refetch(),r(!1)},freeBlock:n,students:c.data?.filter(s=>s.checked_in==="tentative")??[]})]})}function W(o){return e.jsxs(ae,{radius:"md",p:"md",style:{minWidth:0,width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(N,{order:5,mb:"sm",c:o.color,children:o.title}),e.jsx($e,{h:"100%",style:{flex:1},children:o.students.length===0?e.jsx(re,{c:"gray.5",ta:"center",mt:"md",children:"No students"}):o.students.map(t=>e.jsx(oo,{name:t.name,checked:o.checked(t.name),setChecked:r=>o.setChecked(r,t.name)},t.name))})]})}function oo(o){return e.jsx(ae,{radius:b(10),p:b(14),mb:b(10),bd:"1.5px solid #e3e6ea",onClick:()=>o.setChecked(!o.checked),children:e.jsxs(R,{justify:"space-between",align:"center",children:[e.jsx(N,{order:5,fw:600,children:o.name}),e.jsx(A,{bg:"#fafbfe",checked:o.checked,onChange:t=>o.setChecked(t.currentTarget.checked),color:"blue",size:"md",radius:"md"})]})})}export{jo as Route};
