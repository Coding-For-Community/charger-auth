const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SnapEvidence-DHHjpVBU.js","assets/index-CzvGgQO1.js","assets/index-DlEsbloS.css","assets/Stack-1Tl3OIcu.js","assets/polymorphic-factory-Co1Rw585.js","assets/Group-kx4bAz0e.js","assets/Title-C3J5C9u3.js","assets/Button-nGvTbXVw.js","assets/perms-BL0WFHS2.js","assets/fetchBackend-CVLyjmH-.js","assets/UnstyledButton-CsMBea7G.js","assets/Card-cA5yUEdR.js","assets/Paper-BCuh6PX5.js","assets/FocusTrap-BWOqytNK.js","assets/Text-LawEsV5n.js","assets/Modal-BzCcWxoU.js","assets/CloseButton-CiIqfB9f.js","assets/icons-CmxDYBBK.js","assets/ModeSelect-BdSfSj7s.js","assets/Select-DSaP_w9y.js","assets/InputBase-DJFdKPtB.js"])))=>i.map(i=>d[i]);
import{r as n,h as j,j as e,L as p,_ as x}from"./index-CzvGgQO1.js";import{u as v,a as S,c as d}from"./checkIn-USnNLoOh.js";import{b as _,L as T}from"./perms-BL0WFHS2.js";import{b,c as w}from"./icons-CmxDYBBK.js";import{T as m}from"./Title-C3J5C9u3.js";import{T as l}from"./Text-LawEsV5n.js";import{S as E}from"./Stack-1Tl3OIcu.js";import"./fetchBackend-CVLyjmH-.js";import"./polymorphic-factory-Co1Rw585.js";const L=n.lazy(()=>x(()=>import("./SnapEvidence-DHHjpVBU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),y=n.lazy(()=>x(()=>import("./ModeSelect-BdSfSj7s.js"),__vite__mapDeps([18,1,2,19,20,4,16,10,13,7,8,9,3,14])));function O(){const[o,r]=n.useState({status:"loading"}),[u,h]=n.useState(!1),[f,g]=n.useState(!1),{email:c}=_(),{kioskToken:k}=j.useSearch(),t=v(k),s=S();if(n.useEffect(()=>{!u&&s.data&&t.data&&t.data!==0&&(h(!0),d(c,s.data,t.data).then(r));const a=()=>h(!1);return window.addEventListener("hashchange",a),()=>window.removeEventListener("hashchange",a)},[s.data,t.data,u]),t.data===0&&!f)return e.jsx(L,{onSend:a=>{g(!0),r({status:"loading"}),d(c,s.data,void 0,a).then(r)}});let i=e.jsx(e.Fragment,{});switch(o.status){case"loading":i=e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"xl",mb:"md"}),e.jsx(m,{order:3,ta:"center",mb:"xs",children:"Checking you in..."}),e.jsx(l,{ta:"center",c:"dimmed",children:"Please wait while we verify your information and check you in."})]});break;case"ok":i=e.jsxs(e.Fragment,{children:[e.jsx(w,{size:48,color:"green"}),e.jsx(m,{order:3,ta:"center",mt:"md",mb:"xs",children:"Check-in Successful!"}),e.jsxs(l,{ta:"center",c:"dimmed",mb:"md",children:["Welcome",o.studentName?`, ${o.studentName}`:"","! You have just checked in for this block."]}),e.jsx(p,{to:"/",children:"Return to home page"})]});break;case"err":i=e.jsxs(e.Fragment,{children:[e.jsx(b,{size:48,color:"#fa5252"}),e.jsx(m,{order:3,ta:"center",mt:"md",c:"#fa5252",children:"Check-in Failed"}),e.jsx(l,{ta:"center",c:"dimmed",mb:"md",style:{whiteSpace:"pre-wrap"},children:o.msg?.trim()??"An unknown error occurred. Please try again."}),e.jsx(p,{to:"/",children:"Return to home page"})]});break;case"modeNeeded":return e.jsx(y,{onSelect:a=>{r({status:"loading"}),d(c,s.data,t.data,void 0,a).then(r)}})}return e.jsx(E,{justify:"center",align:"center",mih:"100vh",gap:0,p:"md",children:i})}export{O as component};
