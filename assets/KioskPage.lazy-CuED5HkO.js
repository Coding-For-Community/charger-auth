const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ManualCheckInModal-CmWYF2yE.js","assets/index-f4jVrthd.js","assets/index-DlEsbloS.css","assets/perms-JnHyfI8L.js","assets/fetchBackend-BhcWXkpf.js","assets/SignInButton-IY2wy4eS.js","assets/SignInButton-D4w3Pzj6.css","assets/checkIn-DuMUVvMW.js","assets/tslib.es6-BDktPqig.js","assets/ModeSelect-CSzNBfVN.js","assets/Select-BTV72GkC.js","assets/InputBase-CRgqi-tl.js","assets/CloseButton-dd7xDHOg.js","assets/UnstyledButton-CyppDay1.js","assets/FocusTrap-BqIqAopu.js","assets/Button-BUpFG6mw.js","assets/Stack-DqPKgHu3.js","assets/Text-Q1Gb4oOA.js","assets/Modal-DLfcBFWK.js","assets/Paper-C7M-9yG3.js","assets/use-window-event-BgNKlV09.js","assets/Title-D7Y4wAH7.js","assets/TextInput-BJdK_MAG.js","assets/index-DmZCyLpx.js"])))=>i.map(i=>d[i]);
import{c as m,r as a,j as e,_ as u}from"./index-f4jVrthd.js";import{u as h,a as d,L as k}from"./perms-JnHyfI8L.js";import{f as l}from"./fetchBackend-BhcWXkpf.js";import{C as f}from"./Center-C1rbj4OK.js";import{T as n}from"./Text-Q1Gb4oOA.js";import{S as p}from"./Stack-DqPKgHu3.js";import{B as g}from"./Button-BUpFG6mw.js";import"./UnstyledButton-CyppDay1.js";const B=m("/KioskPage")({component:_}),x=a.lazy(()=>u(()=>import("./ManualCheckInModal-CmWYF2yE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),y=a.lazy(()=>u(()=>import("./index-DmZCyLpx.js"),__vite__mapDeps([23,1,2])).then(o=>({default:o.QRCodeSVG})));function _(){const[o,i]=a.useState(!1),s=h(),c=d({queryKey:["qrCodeToken"],queryFn:async()=>await(await l("/checkin/kioskToken/",{credentials:"include"})).json(),refetchInterval:r=>r.state.data?1e3*r.state.data.time_until_refresh:1e3,refetchOnMount:"always"}),t=d({queryKey:["currFreeBlock"],queryFn:async()=>(await(await l("/checkin/freeBlockNow/")).json()).curr_free_block});return t.isFetching||c.isLoading?e.jsxs(f,{style:{minHeight:"100vh"},children:[e.jsx(k,{size:"xl"}),e.jsx(n,{ml:"md",size:"lg",children:"Loading authentication and block info..."})]}):e.jsxs(e.Fragment,{children:[s.data?.teacherMonitored&&e.jsx(x,{open:o,setOpen:i}),e.jsxs(p,{align:"center",justify:"center",h:"100vh",gap:0,children:[e.jsx(n,{fz:30,fw:"bold",mb:5,children:t.data?"Scan the QR code to check in!":"You can't check in right now."}),e.jsx(n,{size:"lg",c:"dimmed",ta:"center",mt:0,mb:30,children:t.data&&`Current Free Period: ${t.data} Block`}),e.jsx(y,{value:`https://coding-for-community.github.io/charger-auth/#/CheckInPage?kioskToken=${c.data.token}`,size:550}),e.jsx(g,{bg:"red",size:"xl",display:s.data?.teacherMonitored?"block":"none",my:30,onClick:()=>i(!0),children:"Don't have a phone?"})]})]})}export{B as Route};
