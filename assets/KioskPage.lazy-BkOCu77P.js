const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ManualCheckInModal-CeIlwO9n.js","assets/index-CDPy5nL5.js","assets/index-DlEsbloS.css","assets/perms-BHIf_Rlz.js","assets/polymorphic-factory-DhmKr4nh.js","assets/fetchBackend-CVLyjmH-.js","assets/SignInButton-C1Qr7hTC.js","assets/SignInButton-BoT6eyTM.css","assets/checkIn-na2t24ph.js","assets/icons-Bw9nqyag.js","assets/ModeSelect-D8qUNkXJ.js","assets/Select-C6N6-WJ5.js","assets/InputBase-B4xIpQtX.js","assets/CloseButton-Dj957TLX.js","assets/UnstyledButton-ByFpGHWe.js","assets/FocusTrap-D0LZ5N_s.js","assets/Button-BeeQ1w1m.js","assets/Stack-CyIbI5i-.js","assets/Text-CDimGAO5.js","assets/Modal-BNcynYZd.js","assets/Paper-C84eN9vs.js","assets/Title-Af8p2ZM3.js","assets/TextInput-BP6kZvzp.js","assets/index-t2iiOfmo.js"])))=>i.map(i=>d[i]);
import{c as m,r as a,j as e,_ as l}from"./index-CDPy5nL5.js";import{u,a as h,L as f}from"./perms-BHIf_Rlz.js";import{f as p}from"./fetchBackend-CVLyjmH-.js";import{C as k}from"./Center-BCgcbfgX.js";import{T as t}from"./Text-CDimGAO5.js";import{S as d}from"./Stack-CyIbI5i-.js";import{B as g}from"./Button-BeeQ1w1m.js";import"./polymorphic-factory-DhmKr4nh.js";import"./UnstyledButton-ByFpGHWe.js";const E=m("/KioskPage")({component:_}),x=a.lazy(()=>l(()=>import("./ManualCheckInModal-CeIlwO9n.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),j=a.lazy(()=>l(()=>import("./index-t2iiOfmo.js"),__vite__mapDeps([23,1,2])).then(r=>({default:r.QRCodeSVG})));function _(){const[r,s]=a.useState(!1),i=u(),o=h({queryKey:["qrCodeToken"],queryFn:async()=>await(await p("/checkin/kioskToken/",{credentials:"include"})).json(),refetchInterval:n=>n.state.data?1e3*n.state.data.time_until_refresh:1e3,refetchOnMount:"always"});if(o.isLoading)return e.jsxs(k,{style:{minHeight:"100vh"},children:[e.jsx(f,{size:"xl"}),e.jsx(t,{ml:"md",size:"lg",children:"Loading authentication and block info..."})]});const c=o.data.curr_free_block;return c?e.jsxs(e.Fragment,{children:[i.data?.teacherMonitored&&e.jsx(x,{open:r,setOpen:s}),e.jsxs(d,{align:"center",justify:"center",h:"100vh",gap:0,children:[e.jsx(t,{fz:30,fw:"bold",mb:5,children:"Scan the QR code to check in!"}),e.jsxs(t,{size:"lg",c:"dimmed",ta:"center",mt:0,mb:30,children:["Current Free Period: ",c," Block"]}),e.jsx(j,{value:`https://coding-for-community.github.io/charger-auth/#/CheckInPage?kioskToken=${o.data.token}`,size:550,style:{marginBottom:30}}),e.jsx(g,{bg:"red",size:"xl",display:i.data?.teacherMonitored?"block":"none",mb:30,onClick:()=>s(!0),children:"Don't have a phone?"})]})]}):e.jsx(d,{align:"center",justify:"center",h:"100vh",gap:0,children:e.jsx(t,{fz:30,fw:"bold",mb:5,children:"No free period is currently available."})})}export{E as Route};
