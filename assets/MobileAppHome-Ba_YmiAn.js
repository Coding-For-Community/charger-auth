import{r as b,j as p,a as $,R as S,u as et}from"./index-CylKWAoP.js";import{a as tt}from"./icons-Dw_nQUAK.js";import{u as ot}from"./useQuery-vgHNO6Is.js";import{f as Z,B as Se}from"./fetchBackend-C4VrHFCd.js";import{c as Ie,u as st,a as nt,b as rt,O as at,R as it,g as q,T as ge,F as lt,d as ct,L as dt,S as ut,A as he,G as ht,e as ft}from"./AppShell-lNRbNgBy.js";import{u as mt,B,g as pt,a as gt,c as G,C as yt,f as O,b as I,d as se,e as ne,h as ye,i as te,j as J,p as Mt,U as vt,k as Et}from"./CloseButton-BFadTMgF.js";import{P as Ct,T as fe}from"./Title-BWkew9CQ.js";import{S as Ne}from"./Stack-UgzwJXYa.js";import{T as Re}from"./Text-CyvShFUQ.js";const[wt,L]=Ie("ModalBase component was not found in tree");function bt({opened:a,transitionDuration:n}){const[s,i]=b.useState(a),d=b.useRef(-1),f=st()?0:n;return b.useEffect(()=>(a?(i(!0),window.clearTimeout(d.current)):f===0?i(!1):d.current=window.setTimeout(()=>i(!1),f),()=>window.clearTimeout(d.current)),[a,f]),s}function St({id:a,transitionProps:n,opened:s,trapFocus:i,closeOnEscape:d,onClose:l,returnFocus:f}){const u=mt(a),[e,t]=b.useState(!1),[o,r]=b.useState(!1),c=typeof n?.duration=="number"?n?.duration:200,m=bt({opened:s,transitionDuration:c});return nt("keydown",h=>{h.key==="Escape"&&d&&!h.isComposing&&s&&h.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&l()},{capture:!0}),rt({opened:s,shouldReturnFocus:i&&f}),{_id:u,titleMounted:e,bodyMounted:o,shouldLockScroll:m,setTitleMounted:t,setBodyMounted:r}}const Ae=b.forwardRef(({keepMounted:a,opened:n,onClose:s,id:i,transitionProps:d,onExitTransitionEnd:l,onEnterTransitionEnd:f,trapFocus:u,closeOnEscape:e,returnFocus:t,closeOnClickOutside:o,withinPortal:r,portalProps:c,lockScroll:m,children:h,zIndex:g,shadow:y,padding:N,__vars:E,unstyled:M,removeScrollProps:C,...x},F)=>{const{_id:D,titleMounted:T,bodyMounted:P,shouldLockScroll:z,setTitleMounted:R,setBodyMounted:W}=St({id:i,transitionProps:d,opened:n,trapFocus:u,closeOnEscape:e,onClose:s,returnFocus:t}),{key:ee,...j}=C||{};return p.jsx(at,{...c,withinPortal:r,children:p.jsx(wt,{value:{opened:n,onClose:s,closeOnClickOutside:o,onExitTransitionEnd:l,onEnterTransitionEnd:f,transitionProps:{...d,keepMounted:a},getTitleId:()=>`${D}-title`,getBodyId:()=>`${D}-body`,titleMounted:T,bodyMounted:P,setTitleMounted:R,setBodyMounted:W,trapFocus:u,closeOnEscape:e,zIndex:g,unstyled:M},children:p.jsx(it,{enabled:z&&m,...j,children:p.jsx(B,{ref:F,...x,__vars:{...E,"--mb-z-index":(g||q("modal")).toString(),"--mb-shadow":gt(y),"--mb-padding":pt(N)},children:h})},ee)})})});Ae.displayName="@mantine/core/ModalBase";function Nt(){const a=L();return b.useEffect(()=>(a.setBodyMounted(!0),()=>a.setBodyMounted(!1)),[]),a.getBodyId()}var V={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Be=b.forwardRef(({className:a,...n},s)=>{const i=Nt(),d=L();return p.jsx(B,{ref:s,...n,id:i,className:G({[V.body]:!d.unstyled},a)})});Be.displayName="@mantine/core/ModalBaseBody";const Oe=b.forwardRef(({className:a,onClick:n,...s},i)=>{const d=L();return p.jsx(yt,{ref:i,...s,onClick:l=>{d.onClose(),n?.(l)},className:G({[V.close]:!d.unstyled},a),unstyled:d.unstyled})});Oe.displayName="@mantine/core/ModalBaseCloseButton";const Te=b.forwardRef(({transitionProps:a,className:n,innerProps:s,onKeyDown:i,style:d,...l},f)=>{const u=L();return p.jsx(ge,{mounted:u.opened,transition:"pop",...u.transitionProps,onExited:()=>{u.onExitTransitionEnd?.(),u.transitionProps?.onExited?.()},onEntered:()=>{u.onEnterTransitionEnd?.(),u.transitionProps?.onEntered?.()},...a,children:e=>p.jsx("div",{...s,className:G({[V.inner]:!u.unstyled},s.className),children:p.jsx(lt,{active:u.opened&&u.trapFocus,innerRef:f,children:p.jsx(Ct,{...l,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":u.bodyMounted?u.getBodyId():void 0,"aria-labelledby":u.titleMounted?u.getTitleId():void 0,style:[d,e],className:G({[V.content]:!u.unstyled},n),unstyled:u.unstyled,children:l.children})})})})});Te.displayName="@mantine/core/ModalBaseContent";const je=b.forwardRef(({className:a,...n},s)=>{const i=L();return p.jsx(B,{component:"header",ref:s,className:G({[V.header]:!i.unstyled},a),...n})});je.displayName="@mantine/core/ModalBaseHeader";const Rt={duration:200,timingFunction:"ease",transition:"fade"};function xt(a){const n=L();return{...Rt,...n.transitionProps,...a}}const _e=b.forwardRef(({onClick:a,transitionProps:n,style:s,visible:i,...d},l)=>{const f=L(),u=xt(n);return p.jsx(ge,{mounted:i!==void 0?i:f.opened,...u,transition:"fade",children:e=>p.jsx(ct,{ref:l,fixed:!0,style:[s,e],zIndex:f.zIndex,unstyled:f.unstyled,onClick:t=>{a?.(t),f.closeOnClickOutside&&f.onClose()},...d})})});_e.displayName="@mantine/core/ModalBaseOverlay";function Pt(){const a=L();return b.useEffect(()=>(a.setTitleMounted(!0),()=>a.setTitleMounted(!1)),[]),a.getTitleId()}const Le=b.forwardRef(({className:a,...n},s)=>{const i=Pt(),d=L();return p.jsx(B,{component:"h2",ref:s,className:G({[V.title]:!d.unstyled},a),...n,id:i})});Le.displayName="@mantine/core/ModalBaseTitle";function It({children:a}){return p.jsx(p.Fragment,{children:a})}var Y={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const xe={orientation:"horizontal"},At=ne((a,{borderWidth:n})=>({group:{"--button-border-width":$(n)}})),Me=O((a,n)=>{const s=I("ButtonGroup",xe,a),{className:i,style:d,classNames:l,styles:f,unstyled:u,orientation:e,vars:t,borderWidth:o,variant:r,mod:c,attributes:m,...h}=I("ButtonGroup",xe,a),g=se({name:"ButtonGroup",props:s,classes:Y,className:i,style:d,classNames:l,styles:f,unstyled:u,attributes:m,vars:t,varsResolver:At,rootSelector:"group"});return p.jsx(B,{...g("group"),ref:n,variant:r,mod:[{"data-orientation":e},c],role:"group",...h})});Me.classes=Y;Me.displayName="@mantine/core/ButtonGroup";const Bt=ne((a,{radius:n,color:s,gradient:i,variant:d,autoContrast:l,size:f})=>{const u=a.variantColorResolver({color:s||a.primaryColor,theme:a,gradient:i,variant:d||"filled",autoContrast:l});return{groupSection:{"--section-height":J(f,"section-height"),"--section-padding-x":J(f,"section-padding-x"),"--section-fz":f?.includes("compact")?te(f.replace("compact-","")):te(f),"--section-radius":n===void 0?void 0:ye(n),"--section-bg":s||d?u.background:void 0,"--section-color":u.color,"--section-bd":s||d?u.border:void 0}}}),ve=O((a,n)=>{const s=I("ButtonGroupSection",null,a),{className:i,style:d,classNames:l,styles:f,unstyled:u,vars:e,variant:t,gradient:o,radius:r,autoContrast:c,attributes:m,...h}=s,g=se({name:"ButtonGroupSection",props:s,classes:Y,className:i,style:d,classNames:l,styles:f,unstyled:u,attributes:m,vars:e,varsResolver:Bt,rootSelector:"groupSection"});return p.jsx(B,{...g("groupSection"),ref:n,variant:t,...h})});ve.classes=Y;ve.displayName="@mantine/core/ButtonGroupSection";const Ot={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${$(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Tt=ne((a,{radius:n,color:s,gradient:i,variant:d,size:l,justify:f,autoContrast:u})=>{const e=a.variantColorResolver({color:s||a.primaryColor,theme:a,gradient:i,variant:d||"filled",autoContrast:u});return{root:{"--button-justify":f,"--button-height":J(l,"button-height"),"--button-padding-x":J(l,"button-padding-x"),"--button-fz":l?.includes("compact")?te(l.replace("compact-","")):te(l),"--button-radius":n===void 0?void 0:ye(n),"--button-bg":s||d?e.background:void 0,"--button-hover":s||d?e.hover:void 0,"--button-color":e.color,"--button-bd":s||d?e.border:void 0,"--button-hover-color":s||d?e.hoverColor:void 0}}}),U=Mt((a,n)=>{const s=I("Button",null,a),{style:i,vars:d,className:l,color:f,disabled:u,children:e,leftSection:t,rightSection:o,fullWidth:r,variant:c,radius:m,loading:h,loaderProps:g,gradient:y,classNames:N,styles:E,unstyled:M,"data-disabled":C,autoContrast:x,mod:F,attributes:D,...T}=s,P=se({name:"Button",props:s,classes:Y,className:l,style:i,classNames:N,styles:E,unstyled:M,attributes:D,vars:d,varsResolver:Tt}),z=!!t,R=!!o;return p.jsxs(vt,{ref:n,...P("root",{active:!u&&!h&&!C}),unstyled:M,variant:c,disabled:u||h,mod:[{disabled:u||C,loading:h,block:r,"with-left-section":z,"with-right-section":R},F],...T,children:[typeof h=="boolean"&&p.jsx(ge,{mounted:h,transition:Ot,duration:150,children:W=>p.jsx(B,{component:"span",...P("loader",{style:W}),"aria-hidden":!0,children:p.jsx(dt,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),p.jsxs("span",{...P("inner"),children:[t&&p.jsx(B,{component:"span",...P("section"),mod:{position:"left"},children:t}),p.jsx(B,{component:"span",mod:{loading:h},...P("label"),children:e}),o&&p.jsx(B,{component:"span",...P("section"),mod:{position:"right"},children:o})]})]})});U.classes=Y;U.displayName="@mantine/core/Button";U.Group=Me;U.GroupSection=ve;const[jt,K]=Ie("Modal component was not found in tree");var k={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const re=O((a,n)=>{const s=I("ModalBody",null,a),{classNames:i,className:d,style:l,styles:f,vars:u,...e}=s,t=K();return p.jsx(Be,{ref:n,...t.getStyles("body",{classNames:i,style:l,styles:f,className:d}),...e})});re.classes=k;re.displayName="@mantine/core/ModalBody";const ae=O((a,n)=>{const s=I("ModalCloseButton",null,a),{classNames:i,className:d,style:l,styles:f,vars:u,...e}=s,t=K();return p.jsx(Oe,{ref:n,...t.getStyles("close",{classNames:i,style:l,styles:f,className:d}),...e})});ae.classes=k;ae.displayName="@mantine/core/ModalCloseButton";const ie=O((a,n)=>{const s=I("ModalContent",null,a),{classNames:i,className:d,style:l,styles:f,vars:u,children:e,__hidden:t,...o}=s,r=K(),c=r.scrollAreaComponent||It;return p.jsx(Te,{...r.getStyles("content",{className:d,style:l,styles:f,classNames:i}),innerProps:r.getStyles("inner",{className:d,style:l,styles:f,classNames:i}),"data-full-screen":r.fullScreen||void 0,"data-modal-content":!0,"data-hidden":t||void 0,ref:n,...o,children:p.jsx(c,{style:{maxHeight:r.fullScreen?"100dvh":`calc(100dvh - (${$(r.yOffset)} * 2))`},children:e})})});ie.classes=k;ie.displayName="@mantine/core/ModalContent";const le=O((a,n)=>{const s=I("ModalHeader",null,a),{classNames:i,className:d,style:l,styles:f,vars:u,...e}=s,t=K();return p.jsx(je,{ref:n,...t.getStyles("header",{classNames:i,style:l,styles:f,className:d}),...e})});le.classes=k;le.displayName="@mantine/core/ModalHeader";const ce=O((a,n)=>{const s=I("ModalOverlay",null,a),{classNames:i,className:d,style:l,styles:f,vars:u,...e}=s,t=K();return p.jsx(_e,{ref:n,...t.getStyles("overlay",{classNames:i,style:l,styles:f,className:d}),...e})});ce.classes=k;ce.displayName="@mantine/core/ModalOverlay";const _t={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:q("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},Lt=ne((a,{radius:n,size:s,yOffset:i,xOffset:d})=>({root:{"--modal-radius":n===void 0?void 0:ye(n),"--modal-size":J(s,"modal-size"),"--modal-y-offset":$(i),"--modal-x-offset":$(d)}})),de=O((a,n)=>{const s=I("ModalRoot",_t,a),{classNames:i,className:d,style:l,styles:f,unstyled:u,vars:e,yOffset:t,scrollAreaComponent:o,radius:r,fullScreen:c,centered:m,xOffset:h,__staticSelector:g,attributes:y,...N}=s,E=se({name:g,classes:k,props:s,className:d,style:l,classNames:i,styles:f,unstyled:u,attributes:y,vars:e,varsResolver:Lt});return p.jsx(jt,{value:{yOffset:t,scrollAreaComponent:o,getStyles:E,fullScreen:c},children:p.jsx(Ae,{ref:n,...E("root"),"data-full-screen":c||void 0,"data-centered":m||void 0,"data-offset-scrollbars":o===ut.Autosize||void 0,unstyled:u,...N})})});de.classes=k;de.displayName="@mantine/core/ModalRoot";const[kt,Ft]=Et();function ke({children:a}){const[n,s]=b.useState([]),[i,d]=b.useState(q("modal"));return p.jsx(kt,{value:{stack:n,addModal:(l,f)=>{s(u=>[...new Set([...u,l])]),d(u=>typeof f=="number"&&typeof u=="number"?Math.max(u,f):u)},removeModal:l=>s(f=>f.filter(u=>u!==l)),getZIndex:l=>`calc(${i} + ${n.indexOf(l)} + 1)`,currentId:n[n.length-1],maxZIndex:i},children:a})}ke.displayName="@mantine/core/ModalStack";const ue=O((a,n)=>{const s=I("ModalTitle",null,a),{classNames:i,className:d,style:l,styles:f,vars:u,...e}=s,t=K();return p.jsx(Le,{ref:n,...t.getStyles("title",{classNames:i,style:l,styles:f,className:d}),...e})});ue.classes=k;ue.displayName="@mantine/core/ModalTitle";const Dt={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:q("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},A=O((a,n)=>{const{title:s,withOverlay:i,overlayProps:d,withCloseButton:l,closeButtonProps:f,children:u,radius:e,opened:t,stackId:o,zIndex:r,...c}=I("Modal",Dt,a),m=Ft(),h=!!s||l,g=m&&o?{closeOnEscape:m.currentId===o,trapFocus:m.currentId===o,zIndex:m.getZIndex(o)}:{},y=i===!1?!1:o&&m?m.currentId===o:t;return b.useEffect(()=>{m&&o&&(t?m.addModal(o,r||q("modal")):m.removeModal(o))},[t,o,r]),p.jsxs(de,{ref:n,radius:e,opened:t,zIndex:m&&o?m.getZIndex(o):r,...c,...g,children:[i&&p.jsx(ce,{visible:y,transitionProps:m&&o?{duration:0}:void 0,...d}),p.jsxs(ie,{radius:e,__hidden:m&&o&&t?o!==m.currentId:!1,children:[h&&p.jsxs(le,{children:[s&&p.jsx(ue,{children:s}),l&&p.jsx(ae,{...f})]}),p.jsx(re,{children:u})]})]})});A.classes=k;A.displayName="@mantine/core/Modal";A.Root=de;A.Overlay=ce;A.Content=ie;A.Body=re;A.Header=le;A.Title=ue;A.CloseButton=ae;A.Stack=ke;var zt=Object.defineProperty,oe=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Pe=(a,n,s)=>n in a?zt(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,me=(a,n)=>{for(var s in n||(n={}))Fe.call(n,s)&&Pe(a,s,n[s]);if(oe)for(var s of oe(n))De.call(n,s)&&Pe(a,s,n[s]);return a},pe=(a,n)=>{var s={};for(var i in a)Fe.call(a,i)&&n.indexOf(i)<0&&(s[i]=a[i]);if(a!=null&&oe)for(var i of oe(a))n.indexOf(i)<0&&De.call(a,i)&&(s[i]=a[i]);return s};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Q;(a=>{const n=class v{constructor(e,t,o,r){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<v.MIN_VERSION||e>v.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let c=[];for(let h=0;h<this.size;h++)c.push(!1);for(let h=0;h<this.size;h++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(o);if(this.drawCodewords(m),r==-1){let h=1e9;for(let g=0;g<8;g++){this.applyMask(g),this.drawFormatBits(g);const y=this.getPenaltyScore();y<h&&(r=g,h=y),this.applyMask(g)}}d(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,t){const o=a.QrSegment.makeSegments(e);return v.encodeSegments(o,t)}static encodeBinary(e,t){const o=a.QrSegment.makeBytes(e);return v.encodeSegments([o],t)}static encodeSegments(e,t,o=1,r=40,c=-1,m=!0){if(!(v.MIN_VERSION<=o&&o<=r&&r<=v.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let h,g;for(h=o;;h++){const M=v.getNumDataCodewords(h,t)*8,C=f.getTotalBits(e,h);if(C<=M){g=C;break}if(h>=r)throw new RangeError("Data too long")}for(const M of[v.Ecc.MEDIUM,v.Ecc.QUARTILE,v.Ecc.HIGH])m&&g<=v.getNumDataCodewords(h,M)*8&&(t=M);let y=[];for(const M of e){s(M.mode.modeBits,4,y),s(M.numChars,M.mode.numCharCountBits(h),y);for(const C of M.getData())y.push(C)}d(y.length==g);const N=v.getNumDataCodewords(h,t)*8;d(y.length<=N),s(0,Math.min(4,N-y.length),y),s(0,(8-y.length%8)%8,y),d(y.length%8==0);for(let M=236;y.length<N;M^=253)s(M,8,y);let E=[];for(;E.length*8<y.length;)E.push(0);return y.forEach((M,C)=>E[C>>>3]|=M<<7-(C&7)),new v(h,t,E,c)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let o=0;o<this.size;o++)this.setFunctionModule(6,o,o%2==0),this.setFunctionModule(o,6,o%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let o=0;o<t;o++)for(let r=0;r<t;r++)o==0&&r==0||o==0&&r==t-1||o==t-1&&r==0||this.drawAlignmentPattern(e[o],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let o=t;for(let c=0;c<10;c++)o=o<<1^(o>>>9)*1335;const r=(t<<10|o)^21522;d(r>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,i(r,c));this.setFunctionModule(8,7,i(r,6)),this.setFunctionModule(8,8,i(r,7)),this.setFunctionModule(7,8,i(r,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,i(r,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,i(r,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,i(r,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let o=0;o<12;o++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;d(t>>>18==0);for(let o=0;o<18;o++){const r=i(t,o),c=this.size-11+o%3,m=Math.floor(o/3);this.setFunctionModule(c,m,r),this.setFunctionModule(m,c,r)}}drawFinderPattern(e,t){for(let o=-4;o<=4;o++)for(let r=-4;r<=4;r++){const c=Math.max(Math.abs(r),Math.abs(o)),m=e+r,h=t+o;0<=m&&m<this.size&&0<=h&&h<this.size&&this.setFunctionModule(m,h,c!=2&&c!=4)}}drawAlignmentPattern(e,t){for(let o=-2;o<=2;o++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+o,Math.max(Math.abs(r),Math.abs(o))!=1)}setFunctionModule(e,t,o){this.modules[t][e]=o,this.isFunction[t][e]=!0}addEccAndInterleave(e){const t=this.version,o=this.errorCorrectionLevel;if(e.length!=v.getNumDataCodewords(t,o))throw new RangeError("Invalid argument");const r=v.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][t],c=v.ECC_CODEWORDS_PER_BLOCK[o.ordinal][t],m=Math.floor(v.getNumRawDataModules(t)/8),h=r-m%r,g=Math.floor(m/r);let y=[];const N=v.reedSolomonComputeDivisor(c);for(let M=0,C=0;M<r;M++){let x=e.slice(C,C+g-c+(M<h?0:1));C+=x.length;const F=v.reedSolomonComputeRemainder(x,N);M<h&&x.push(0),y.push(x.concat(F))}let E=[];for(let M=0;M<y[0].length;M++)y.forEach((C,x)=>{(M!=g-c||x>=h)&&E.push(C[M])});return d(E.length==m),E}drawCodewords(e){if(e.length!=Math.floor(v.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let o=this.size-1;o>=1;o-=2){o==6&&(o=5);for(let r=0;r<this.size;r++)for(let c=0;c<2;c++){const m=o-c,g=(o+1&2)==0?this.size-1-r:r;!this.isFunction[g][m]&&t<e.length*8&&(this.modules[g][m]=i(e[t>>>3],7-(t&7)),t++)}}d(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let o=0;o<this.size;o++){let r;switch(e){case 0:r=(o+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=o%3==0;break;case 3:r=(o+t)%3==0;break;case 4:r=(Math.floor(o/3)+Math.floor(t/2))%2==0;break;case 5:r=o*t%2+o*t%3==0;break;case 6:r=(o*t%2+o*t%3)%2==0;break;case 7:r=((o+t)%2+o*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][o]&&r&&(this.modules[t][o]=!this.modules[t][o])}}getPenaltyScore(){let e=0;for(let c=0;c<this.size;c++){let m=!1,h=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[c][y]==m?(h++,h==5?e+=v.PENALTY_N1:h>5&&e++):(this.finderPenaltyAddHistory(h,g),m||(e+=this.finderPenaltyCountPatterns(g)*v.PENALTY_N3),m=this.modules[c][y],h=1);e+=this.finderPenaltyTerminateAndCount(m,h,g)*v.PENALTY_N3}for(let c=0;c<this.size;c++){let m=!1,h=0,g=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][c]==m?(h++,h==5?e+=v.PENALTY_N1:h>5&&e++):(this.finderPenaltyAddHistory(h,g),m||(e+=this.finderPenaltyCountPatterns(g)*v.PENALTY_N3),m=this.modules[y][c],h=1);e+=this.finderPenaltyTerminateAndCount(m,h,g)*v.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let m=0;m<this.size-1;m++){const h=this.modules[c][m];h==this.modules[c][m+1]&&h==this.modules[c+1][m]&&h==this.modules[c+1][m+1]&&(e+=v.PENALTY_N2)}let t=0;for(const c of this.modules)t=c.reduce((m,h)=>m+(h?1:0),t);const o=this.size*this.size,r=Math.ceil(Math.abs(t*20-o*10)/o)-1;return d(0<=r&&r<=9),e+=r*v.PENALTY_N4,d(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{const e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2;let o=[6];for(let r=this.size-7;o.length<e;r-=t)o.splice(1,0,r);return o}}static getNumRawDataModules(e){if(e<v.MIN_VERSION||e>v.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const o=Math.floor(e/7)+2;t-=(25*o-10)*o-55,e>=7&&(t-=36)}return d(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(v.getNumRawDataModules(e)/8)-v.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*v.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let o=1;for(let r=0;r<e;r++){for(let c=0;c<t.length;c++)t[c]=v.reedSolomonMultiply(t[c],o),c+1<t.length&&(t[c]^=t[c+1]);o=v.reedSolomonMultiply(o,2)}return t}static reedSolomonComputeRemainder(e,t){let o=t.map(r=>0);for(const r of e){const c=r^o.shift();o.push(0),t.forEach((m,h)=>o[h]^=v.reedSolomonMultiply(m,c))}return o}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let o=0;for(let r=7;r>=0;r--)o=o<<1^(o>>>7)*285,o^=(t>>>r&1)*e;return d(o>>>8==0),o}finderPenaltyCountPatterns(e){const t=e[1];d(t<=this.size*3);const o=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(o&&e[0]>=t*4&&e[6]>=t?1:0)+(o&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,o){return e&&(this.finderPenaltyAddHistory(t,o),t=0),t+=this.size,this.finderPenaltyAddHistory(t,o),this.finderPenaltyCountPatterns(o)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a.QrCode=n;function s(u,e,t){if(e<0||e>31||u>>>e)throw new RangeError("Value out of range");for(let o=e-1;o>=0;o--)t.push(u>>>o&1)}function i(u,e){return(u>>>e&1)!=0}function d(u){if(!u)throw new Error("Assertion error")}const l=class w{constructor(e,t,o){if(this.mode=e,this.numChars=t,this.bitData=o,t<0)throw new RangeError("Invalid argument");this.bitData=o.slice()}static makeBytes(e){let t=[];for(const o of e)s(o,8,t);return new w(w.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!w.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let o=0;o<e.length;){const r=Math.min(e.length-o,3);s(parseInt(e.substring(o,o+r),10),r*3+1,t),o+=r}return new w(w.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!w.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],o;for(o=0;o+2<=e.length;o+=2){let r=w.ALPHANUMERIC_CHARSET.indexOf(e.charAt(o))*45;r+=w.ALPHANUMERIC_CHARSET.indexOf(e.charAt(o+1)),s(r,11,t)}return o<e.length&&s(w.ALPHANUMERIC_CHARSET.indexOf(e.charAt(o)),6,t),new w(w.Mode.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:w.isNumeric(e)?[w.makeNumeric(e)]:w.isAlphanumeric(e)?[w.makeAlphanumeric(e)]:[w.makeBytes(w.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)s(e,8,t);else if(e<16384)s(2,2,t),s(e,14,t);else if(e<1e6)s(6,3,t),s(e,21,t);else throw new RangeError("ECI assignment value out of range");return new w(w.Mode.ECI,0,t)}static isNumeric(e){return w.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return w.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let o=0;for(const r of e){const c=r.mode.numCharCountBits(t);if(r.numChars>=1<<c)return 1/0;o+=4+c+r.bitData.length}return o}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let o=0;o<e.length;o++)e.charAt(o)!="%"?t.push(e.charCodeAt(o)):(t.push(parseInt(e.substring(o+1,o+3),16)),o+=2);return t}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let f=l;a.QrSegment=l})(Q||(Q={}));(a=>{(n=>{const s=class{constructor(d,l){this.ordinal=d,this.formatBits=l}};s.LOW=new s(0,1),s.MEDIUM=new s(1,0),s.QUARTILE=new s(2,3),s.HIGH=new s(3,2),n.Ecc=s})(a.QrCode||(a.QrCode={}))})(Q||(Q={}));(a=>{(n=>{const s=class{constructor(d,l){this.modeBits=d,this.numBitsCharCount=l}numCharCountBits(d){return this.numBitsCharCount[Math.floor((d+7)/17)]}};s.NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),n.Mode=s})(a.QrSegment||(a.QrSegment={}))})(Q||(Q={}));var H=Q;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Ut={L:H.QrCode.Ecc.LOW,M:H.QrCode.Ecc.MEDIUM,Q:H.QrCode.Ecc.QUARTILE,H:H.QrCode.Ecc.HIGH},ze=128,Ue="L",Qe="#FFFFFF",He="#000000",$e=!1,Ge=1,Qt=4,Ht=0,$t=.1;function Ve(a,n=0){const s=[];return a.forEach(function(i,d){let l=null;i.forEach(function(f,u){if(!f&&l!==null){s.push(`M${l+n} ${d+n}h${u-l}v1H${l+n}z`),l=null;return}if(u===i.length-1){if(!f)return;l===null?s.push(`M${u+n},${d+n} h1v1H${u+n}z`):s.push(`M${l+n},${d+n} h${u+1-l}v1H${l+n}z`);return}f&&l===null&&(l=u)})}),s.join("")}function Ye(a,n){return a.slice().map((s,i)=>i<n.y||i>=n.y+n.h?s:s.map((d,l)=>l<n.x||l>=n.x+n.w?d:!1))}function Gt(a,n,s,i){if(i==null)return null;const d=a.length+s*2,l=Math.floor(n*$t),f=d/n,u=(i.width||l)*f,e=(i.height||l)*f,t=i.x==null?a.length/2-u/2:i.x*f,o=i.y==null?a.length/2-e/2:i.y*f,r=i.opacity==null?1:i.opacity;let c=null;if(i.excavate){let h=Math.floor(t),g=Math.floor(o),y=Math.ceil(u+t-h),N=Math.ceil(e+o-g);c={x:h,y:g,w:y,h:N}}const m=i.crossOrigin;return{x:t,y:o,h:e,w:u,excavation:c,opacity:r,crossOrigin:m}}function Vt(a,n){return n!=null?Math.max(Math.floor(n),0):a?Qt:Ht}function Ke({value:a,level:n,minVersion:s,includeMargin:i,marginSize:d,imageSettings:l,size:f,boostLevel:u}){let e=S.useMemo(()=>{const h=(Array.isArray(a)?a:[a]).reduce((g,y)=>(g.push(...H.QrSegment.makeSegments(y)),g),[]);return H.QrCode.encodeSegments(h,Ut[n],s,void 0,void 0,u)},[a,n,s,u]);const{cells:t,margin:o,numCells:r,calculatedImageSettings:c}=S.useMemo(()=>{let m=e.getModules();const h=Vt(i,d),g=m.length+h*2,y=Gt(m,f,h,l);return{cells:m,margin:h,numCells:g,calculatedImageSettings:y}},[e,f,l,i,d]);return{qrcode:e,margin:o,cells:t,numCells:r,calculatedImageSettings:c}}var Yt=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Kt=S.forwardRef(function(n,s){const i=n,{value:d,size:l=ze,level:f=Ue,bgColor:u=Qe,fgColor:e=He,includeMargin:t=$e,minVersion:o=Ge,boostLevel:r,marginSize:c,imageSettings:m}=i,g=pe(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:y}=g,N=pe(g,["style"]),E=m?.src,M=S.useRef(null),C=S.useRef(null),x=S.useCallback(j=>{M.current=j,typeof s=="function"?s(j):s&&(s.current=j)},[s]),[F,D]=S.useState(!1),{margin:T,cells:P,numCells:z,calculatedImageSettings:R}=Ke({value:d,level:f,minVersion:o,boostLevel:r,includeMargin:t,marginSize:c,imageSettings:m,size:l});S.useEffect(()=>{if(M.current!=null){const j=M.current,_=j.getContext("2d");if(!_)return;let Ee=P;const X=C.current,Ce=R!=null&&X!==null&&X.complete&&X.naturalHeight!==0&&X.naturalWidth!==0;Ce&&R.excavation!=null&&(Ee=Ye(P,R.excavation));const we=window.devicePixelRatio||1;j.height=j.width=l*we;const be=l/z*we;_.scale(be,be),_.fillStyle=u,_.fillRect(0,0,z,z),_.fillStyle=e,Yt?_.fill(new Path2D(Ve(Ee,T))):P.forEach(function(Xe,Ze){Xe.forEach(function(Je,qe){Je&&_.fillRect(qe+T,Ze+T,1,1)})}),R&&(_.globalAlpha=R.opacity),Ce&&_.drawImage(X,R.x+T,R.y+T,R.w,R.h)}}),S.useEffect(()=>{D(!1)},[E]);const W=me({height:l,width:l},y);let ee=null;return E!=null&&(ee=S.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{D(!0)},ref:C,crossOrigin:R?.crossOrigin})),S.createElement(S.Fragment,null,S.createElement("canvas",me({style:W,height:l,width:l,ref:x,role:"img"},N)),ee)});Kt.displayName="QRCodeCanvas";var We=S.forwardRef(function(n,s){const i=n,{value:d,size:l=ze,level:f=Ue,bgColor:u=Qe,fgColor:e=He,includeMargin:t=$e,minVersion:o=Ge,boostLevel:r,title:c,marginSize:m,imageSettings:h}=i,g=pe(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:y,cells:N,numCells:E,calculatedImageSettings:M}=Ke({value:d,level:f,minVersion:o,boostLevel:r,includeMargin:t,marginSize:m,imageSettings:h,size:l});let C=N,x=null;h!=null&&M!=null&&(M.excavation!=null&&(C=Ye(N,M.excavation)),x=S.createElement("image",{href:h.src,height:M.h,width:M.w,x:M.x+y,y:M.y+y,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const F=Ve(C,y);return S.createElement("svg",me({height:l,width:l,viewBox:`0 0 ${E} ${E}`,ref:s,role:"img"},g),!!c&&S.createElement("title",null,c),S.createElement("path",{fill:u,d:`M0,0 h${E}v${E}H0z`,shapeRendering:"crispEdges"}),S.createElement("path",{fill:e,d:F,shapeRendering:"crispEdges"}),x)});We.displayName="QRCodeSVG";async function Wt(a){if(!("serviceWorker"in navigator)||!("PushManager"in window)){console.error("Push notifications are not supported.");return}try{if(await Notification.requestPermission()!=="granted"){console.warn("Permission for notifications was denied.");return}const s=await navigator.serviceWorker.ready,l=(await(await Z("/notifs/publicKey/")).json()).publicKey,f=Xt(l),u=await s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:f});await Z("/notifs/register/",{method:"POST",body:JSON.stringify({subscription:u,user_id:a})}),console.log("Successfully subscribed to push notifications.")}catch(n){console.error("Failed to subscribe to push notifications:",n)}}function Xt(a){for(var n="=".repeat((4-a.length%4)%4),s=(a+n).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(s),d=new Uint8Array(i.length),l=0;l<i.length;++l)d[l]=i.charCodeAt(l);return d}function lo(){const a=et(),[n,s]=b.useState(!1),[i,d]=b.useState(!1),l=ot({queryKey:["qrCodeToken"],queryFn:async()=>await(await Z("/checkin/token/")).json(),refetchInterval:t=>t.state.data?t.state.data.time_until_refresh*1e3:1e3,refetchOnMount:"always"}),f=window.localStorage.getItem(Se);async function u(){const t=await Z("/notifs/enabled/"+f);d((await t.json()).registered)}async function e(){const t=await Z("/notifs/unregister/",{method:"POST",body:JSON.stringify({user_id:f})});t.status!=200&&console.error("Push notifs WERE NOT DISABLED: "+t.statusText)}return b.useEffect(()=>{!f||f===""?a({to:"/MobileAppSignIn"}):u()},[f]),l.isSuccess?p.jsxs(he,{children:[p.jsxs(A,{opened:n,onClose:()=>s(!1),children:[p.jsx(fe,{order:2,mb:$(10),children:"Settings"}),p.jsxs(Ne,{children:[i?p.jsx(U,{bg:"gray",onClick:e,children:"Disable Push Notifs"}):p.jsx(U,{onClick:()=>Wt(parseInt(f,10)),children:"Enable Push Notifs"}),p.jsx(U,{bg:"red",onClick:()=>{window.localStorage.removeItem(Se),a({to:"/MobileAppSignIn"})},children:"Log Out"})]})]}),p.jsx(he.Main,{children:p.jsxs(Ne,{style:{justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[p.jsx(fe,{order:3,style:{textAlign:"center"},children:"Rotate the phone 180 degrees so the scanner can see this QR code: "}),p.jsx(We,{value:f+";"+l.data.id,size:200})]})}),p.jsx(he.Header,{children:p.jsxs(ht,{m:10,justify:"space-between",children:[p.jsx("img",{src:"icon.svg",width:25,height:25}),p.jsx(fe,{order:3,children:"ChargerAuth"}),p.jsx(ft,{variant:"transparent",onClick:()=>s(!0),children:p.jsx(tt,{size:50})})]})})]}):l.isError?p.jsx("div",{children:p.jsxs(Re,{children:["Error with fetching token: ",l.error.toString()]})}):p.jsx("div",{children:p.jsx(Re,{children:"..."})})}export{lo as component};
