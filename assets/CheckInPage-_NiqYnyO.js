const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SnapEvidence-C-Q70MrU.js","assets/index-Ctj6sS8n.js","assets/index-DlEsbloS.css","assets/Stack-CM-8rmyV.js","assets/fetchBackend-IphTJSIT.js","assets/Group-Cny5TubG.js","assets/Title-BeNeihoT.js","assets/Button-9np70e6M.js","assets/perms-Cy1ZGP-t.js","assets/UnstyledButton-D8fDeQUS.js","assets/Text-C_L10Vij.js","assets/Modal-BO392yWz.js","assets/FocusTrap-Cq2baCbh.js","assets/CloseButton-CZfOt3aj.js","assets/Paper-DhGshlod.js","assets/use-window-event-jfg7bKi-.js","assets/tslib.es6-BDktPqig.js","assets/ModeSelect-ByJRhYJh.js","assets/Select-C4nC5rES.js","assets/InputBase-ZDnWklTq.js"])))=>i.map(i=>d[i]);
import{r as s,l as j,j as e,L as x,_ as p}from"./index-Ctj6sS8n.js";import{u as k,a as f,b as m}from"./checkIn-Di0tBV8Z.js";import{b as S,L as b}from"./perms-Cy1ZGP-t.js";import{b as _,c as y}from"./icons-DxRMKW0l.js";import{T as l}from"./Title-BeNeihoT.js";import{T as u}from"./Text-C_L10Vij.js";import{S as v}from"./Stack-CM-8rmyV.js";import"./tslib.es6-BDktPqig.js";import"./fetchBackend-IphTJSIT.js";const E=s.lazy(()=>p(()=>import("./SnapEvidence-C-Q70MrU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))),P=s.lazy(()=>p(()=>import("./ModeSelect-ByJRhYJh.js"),__vite__mapDeps([17,1,2,18,19,4,13,9,12,7,8,3,10])));function Q(){const[o,a]=s.useState({status:"loading"}),[c,h]=s.useState("notStarted"),{emailB64:d}=S(),{lastToken:g}=j.useSearch(),t=k(g),n=f();if(s.useEffect(()=>{c==="notStarted"&&t.data&&n.data&&t.data!=0&&(h("inProgress"),m(d,n.data,t.data.token).then(r=>{a(r),h("done")}))},[t.data,n.data,c]),t.data==0&&c!=="done")return e.jsx(E,{title:"",subtitle:"",onSend:async r=>{a({status:"loading"}),m(d,n.data,void 0,r).then(a)}});let i=e.jsx(e.Fragment,{});switch(o.status){case"loading":i=e.jsxs(e.Fragment,{children:[e.jsx(b,{size:"xl",mb:"md"}),e.jsx(l,{order:3,ta:"center",mb:"xs",children:"Checking you in..."}),e.jsx(u,{ta:"center",c:"dimmed",children:"Please wait while we verify your information and check you in."})]});break;case"ok":i=e.jsxs(e.Fragment,{children:[e.jsx(y,{size:48,color:"green"}),e.jsx(l,{order:3,ta:"center",mt:"md",mb:"xs",children:"Check-in Successful!"}),e.jsxs(u,{ta:"center",c:"dimmed",mb:"md",children:["Welcome",o.studentName?`, ${o.studentName}`:"","! You have just checked in for this block."]}),e.jsx(x,{to:"/HomePage",style:{textDecoration:"none"},children:"Return to home page"})]});break;case"err":i=e.jsxs(e.Fragment,{children:[e.jsx(_,{size:48,color:"#fa5252"}),e.jsx(l,{order:3,ta:"center",mt:"md",c:"#fa5252",children:"Check-in Failed"}),e.jsx(u,{ta:"center",c:"dimmed",mb:"md",style:{whiteSpace:"pre-wrap"},children:o.msg?.trim()??"An unknown error occurred. Please try again."}),e.jsx(x,{to:"/HomePage",children:"Return to home page"})]});break;case"modeSelectNeeded":return e.jsx(P,{onSelect:r=>{a({status:"loading"}),m(d,n.data,t.data.token,void 0,r).then(a)}})}return e.jsx(v,{justify:"center",align:"center",mih:"100vh",gap:0,p:"md",children:i})}export{Q as component};
